(()=>{var e={421:e=>{e.exports={$primary:"#5A8DEE",$success:"#39DA8A",$danger:"#FF5B5C",$warning:"#FDAC41",$info:"#00CFDD",$label_color:"#FFFFFF",$primary_light:"#E2ECFF",$danger_light:"#ffeed9",$gray_light:"#828D99",$label_trend:"#f5eff7",$sub_label_color:"#596778",$radial_bg:"#e7edf3",$positive:"#537fd6",$negative:"#dd9942"}}},t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=a(421),t=a.n(e);let o,n,r;function s(e){fetch("/sentiment-per-entity/"+window.project_id+"/?max-entities="+e).then((e=>e.json())).then((e=>{var a={chart:{type:"bar",height:350,stacked:!0,stackType:"100%",events:{click:function(t,a,o){console.log(o);let n,r=o.seriesIndex,s=o.dataPointIndex;console.log(e[s]);let i="";0==r?(i="Positive",n=e[s].data.filter((e=>e.sentiment>0))):1==r?(i="Neutral",n=e[s].data.filter((e=>0==e.sentiment))):2==r&&(i="Negative",n=e[s].data.filter((e=>e.sentiment<0))),console.log(n);let l=document.getElementById("aspectModal");l.style.display="block",l.classList.add("show"),l.setAttribute("aria-modal","true"),l.setAttribute("aria-hidden","false"),$("#aspectModal").modal(),$("#modal-title").html(i+" data for entity: "+e[s].entity_label),$("#modal-table").html(""),$("#modal-table").append("<thead><tr><th>Text</th><th>Sentiment</th></tr></thead>"),$("#modal-table").append("<tbody></tbody>");for(let e of n)$("#modal-table > tbody").append(`<tr><td>${e.text}</td><td>${e.sentiment}</td></tr>`)}}},plotOptions:{bar:{horizontal:!0}},stroke:{width:1},tooltip:{y:{formatter:function(e){return e}},theme:"dark"},fill:{opacity:1},legend:{position:"top",horizontalAlign:"left",offsetX:40,labels:{colors:["white"]}},colors:[t().$positive,t().$info,t().$negative]};let n=[],r=[],s=[],i=[];for(let t of e)i.push(t.entity_label),n.push(t.positive_count),r.push(t.negative_count),s.push(t.neutral_count);a.series=[{name:"Positive",data:n},{name:"Neutral",data:s},{name:"Negative",data:r}],a.xaxis={categories:i,labels:{style:{colors:t().label_trend}}},a.yaxis={labels:{style:{colors:"white"}}};let l=0;l=a.xaxis.categories.length<5?300:40*a.xaxis.categories.length,a.chart.height=l,o&&o.destroy(),o=new ApexCharts(document.querySelector("#sentiment-for-each-entity"),a),o.render()}))}function i(e){document.querySelector("#top-topics-per-aspect").innerHTML="";let t=r;for(aspect in t.aspects){let o=[],r=[],s=0;if(0==t.aspects[aspect].topics.length)continue;for(let a of t.aspects[aspect].topics){if(s++,s>e)break;r.push(a.topic),o.push(a.count)}var a={responsive:[{breakpoint:700,options:{chart:{width:"100%"}}}],legend:{position:"top"},pie:{donut:{labels:{show:!0,name:{}}}},series:o,labels:r,chart:{type:"donut",width:"500"},plotOptions:{pie:{donut:{size:"70%",labels:{show:!0,name:{show:!0,formatter:e=>{if(e)return"Topic: "+e}}}}}}};let i=document.createElement("h2");i.innerHTML="ASPECT: "+aspect,i.style.marginTop="1rem",i.style.marginLeft="auto",i.style.marginRight="auto",i.style.textAlign="center";let l=document.createElement("div");l.className="donut-container",document.querySelector("#top-topics-per-aspect").append(i),document.querySelector("#top-topics-per-aspect").append(l),n=new ApexCharts(l,a),n.render()}}s(8),document.getElementById("select-max-top-sentiment-per-entity").addEventListener("change",(e=>{let t=e.target.value;document.getElementById("sentiment-for-each-entity").innerHTML="",o.destroy(),s(t)})),fetch("/topics-per-aspect/"+window.project_id+"/").then((e=>e.json())).then((e=>{r=e,i(6)})),document.getElementById("select-max-topics-per-aspect").addEventListener("change",(e=>{i(e.target.value)}));var l=window.project_data.aspect_data;let c=[],p=[],d=[],h=[];for(let e of l)h.push(e.label),c.push(e.pos),p.push(e.neg),d.push(e.count-e.pos-e.neg);var u={series:[{name:"Positive",data:c},{name:"Neutral",data:d},{name:"Negative",data:p}],chart:{type:"bar",height:350,stacked:!0,stackType:"100%"},plotOptions:{bar:{horizontal:!0}},stroke:{width:1},xaxis:{categories:h,labels:{style:{colors:t().label_trend}}},tooltip:{y:{formatter:function(e){return e}},theme:"dark"},fill:{opacity:1},legend:{position:"top",horizontalAlign:"left",offsetX:40,labels:{colors:["white"]}}};let m=0;m=u.xaxis.categories.length<5?300:40*u.xaxis.categories.length,u.chart.height=m,u.yaxis={labels:{style:{colors:"white"}}},new ApexCharts(document.querySelector("#sentiment-for-each-aspect"),u).render()})()})();