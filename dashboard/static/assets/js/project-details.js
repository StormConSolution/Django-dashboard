!function(){var e={421:function(e){e.exports={primary:"#5A8DEE",success:"#39DA8A",danger:"#FF5B5C",warning:"#FDAC41",info:"#00CFDD",label_color:"#FFFFFF",primary_light:"#E2ECFF",danger_light:"#ffeed9",gray_light:"#828D99",label_trend:"#f5eff7",sub_label_color:"#596778",radial_bg:"#e7edf3",positive:"#28C76F",negative:"#EA5455",neutral:"#00CFE8"}},929:function(e,t,n){var r=n(258).W,o=Math.PI/180,a=2048;function i(e){return e.text}function s(){return"serif"}function c(){return"normal"}function u(e){return Math.sqrt(e.value)}function l(){return 30*(~~(6*Math.random())-3)}function d(){return 1}function h(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,2048/s,a/s);var c=0,u=0,l=0,d=n.length;for(--r;++r<d;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font;var h=i.measureText(t.text+"m").width*s,f=t.size<<1;if(t.rotate){var p=Math.sin(t.rotate*o),m=Math.cos(t.rotate*o),g=h*m,y=h*p,v=f*m,w=f*p;h=Math.max(Math.abs(g+w),Math.abs(g-w))+31>>5<<5,f=~~Math.max(Math.abs(y+v),Math.abs(y-v))}else h=h+31>>5<<5;if(f>l&&(l=f),c+h>=2048&&(c=0,u+=l,l=0),u+f>=a)break;i.translate((c+(h>>1))/s,(u+(f>>1))/s),t.rotate&&i.rotate(t.rotate*o),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=h,t.height=f,t.xoff=c,t.yoff=u,t.x1=h>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,c+=h}for(var b=i.getImageData(0,0,2048/s,a/s).data,_=[];--r>=0;)if((t=n[r]).hasText){for(var x=(h=t.width)>>5,I=(f=t.y1-t.y0,0);I<f*x;I++)_[I]=0;if(null==(c=t.xoff))return;u=t.yoff;for(var L=0,M=-1,S=0;S<f;S++){for(I=0;I<h;I++){var C=x*S+(I>>5),R=b[2048*(u+S)+(c+I)<<2]?1<<31-I%32:0;_[C]|=R,L|=R}L?M=S:(t.y0++,f--,S--,u++)}t.y1=t.y0+M,t.sprite=_.slice(0,(t.y1-t.y0)*x)}}}function f(e,t,n){n>>=5;for(var r,o=e.sprite,a=e.width>>5,i=e.x-(a<<4),s=127&i,c=32-s,u=e.y1-e.y0,l=(e.y+e.y0)*n+(i>>5),d=0;d<u;d++){r=0;for(var h=0;h<=a;h++)if((r<<c|(h<a?(r=o[d*a+h])>>>s:0))&t[l+h])return!0;l+=n}return!1}function p(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function m(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function g(){return document.createElement("canvas")}function y(e){return"function"==typeof e?e:function(){return e}}e.exports=function(){var e=[256,256],t=i,n=s,o=u,w=c,b=c,_=l,x=d,I=m,L=[],M=1/0,S=r("word","end"),C=null,R=Math.random,U={},k=g;function D(t,n,r){e[0],e[1];for(var o,a,i,s,c,u=n.x,l=n.y,d=Math.sqrt(e[0]*e[0]+e[1]*e[1]),h=I(e),p=R()<.5?1:-1,m=-p;(o=h(m+=p))&&(a=~~o[0],i=~~o[1],!(Math.min(Math.abs(a),Math.abs(i))>=d));)if(n.x=u+a,n.y=l+i,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>e[0]||n.y+n.y1>e[1]||r&&f(n,t,e[0])||r&&(c=r,!((s=n).x+s.x1>c[0].x&&s.x+s.x0<c[1].x&&s.y+s.y1>c[0].y&&s.y+s.y0<c[1].y)))){for(var g,y=n.sprite,v=n.width>>5,w=e[0]>>5,b=n.x-(v<<4),_=127&b,x=32-_,L=n.y1-n.y0,M=(n.y+n.y0)*w+(b>>5),S=0;S<L;S++){g=0;for(var C=0;C<=v;C++)t[M+C]|=g<<x|(C<v?(g=y[S*v+C])>>>_:0);M+=w}return delete n.sprite,!0}return!1}return U.canvas=function(e){return arguments.length?(k=y(e),U):k},U.start=function(){var r=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=a/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(k()),i=function(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}((e[0]>>5)*e[1]),s=null,c=L.length,u=-1,l=[],d=L.map((function(e,r){return e.text=t.call(this,e,r),e.font=n.call(this,e,r),e.style=w.call(this,e,r),e.weight=b.call(this,e,r),e.rotate=_.call(this,e,r),e.size=~~o.call(this,e,r),e.padding=x.call(this,e,r),e})).sort((function(e,t){return t.size-e.size}));return C&&clearInterval(C),C=setInterval(f,0),f(),U;function f(){for(var t=Date.now();Date.now()-t<M&&++u<c&&C;){var n=d[u];n.x=e[0]*(R()+.5)>>1,n.y=e[1]*(R()+.5)>>1,h(r,n,d,u),n.hasText&&D(i,n,s)&&(l.push(n),S.call("word",U,n),s?p(s,n):s=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=e[0]>>1,n.y-=e[1]>>1)}u>=c&&(U.stop(),S.call("end",U,l,s))}},U.stop=function(){return C&&(clearInterval(C),C=null),U},U.timeInterval=function(e){return arguments.length?(M=null==e?1/0:e,U):M},U.words=function(e){return arguments.length?(L=e,U):L},U.size=function(t){return arguments.length?(e=[+t[0],+t[1]],U):e},U.font=function(e){return arguments.length?(n=y(e),U):n},U.fontStyle=function(e){return arguments.length?(w=y(e),U):w},U.fontWeight=function(e){return arguments.length?(b=y(e),U):b},U.rotate=function(e){return arguments.length?(_=y(e),U):_},U.text=function(e){return arguments.length?(t=y(e),U):t},U.spiral=function(e){return arguments.length?(I=v[e]||e,U):I},U.fontSize=function(e){return arguments.length?(o=y(e),U):o},U.padding=function(e){return arguments.length?(x=y(e),U):x},U.random=function(e){return arguments.length?(R=e,U):R},U.on=function(){var e=S.on.apply(S,arguments);return e===S?U:e},U};var v={archimedean:m,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var o=e<0?-1:1;switch(Math.sqrt(1+4*o*e)-o&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}}},626:function(e,t){"use strict";var n={value:function(){}};function r(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new o(r)}function o(e){this._=e}function a(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function i(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function s(e,t,r){for(var o=0,a=e.length;o<a;++o)if(e[o].name===t){e[o]=n,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=r&&e.push({name:t,value:r}),e}o.prototype=r.prototype={constructor:o,on:function(e,t){var n,r=this._,o=a(e+"",r),c=-1,u=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++c<u;)if(n=(e=o[c]).type)r[n]=s(r[n],e.name,t);else if(null==t)for(n in r)r[n]=s(r[n],e.name,null);return this}for(;++c<u;)if((n=(e=o[c]).type)&&(n=i(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new o(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),a=0;a<n;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}},t.Z=r},258:function(e,t,n){"use strict";n.d(t,{W:function(){return r.Z}});var r=n(626)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=n(421),t=n.n(e);function r(){let e=document.getElementById("date-from").value,t=document.getElementById("date-to").value,n=document.querySelectorAll("#dropdown-languages-project-details .choose input:checked"),r=[],o=[],a=[];for(let e of n)o.push(e.value);let i=document.querySelectorAll("#dropdown-sources .choose input:checked");for(let e of i)r.push(e.value),a.push(e.getAttribute("data-id"));return{dateFrom:e,dateTo:t,sources:"",sourcesID:a.join(","),languages:o.join(",")}}let o=function(){s++},a=function(){s--},i=function(){return 0===s},s=0;function c(e){document.querySelector(`[data-graph-table="${e}"]`).style.display="block"}function u(e,t,n,r,o,a,i,s){let c=document.createElement("div");c.className="row no-gutters",n<t&&(t=n);let u=`\n    <div class="col-12 col-md">\n        <div class="pagination-data">Showing ${e} to ${t} of ${n} entries</div>\n    </div>\n    `;n>0&&(c.innerHTML=u);let d=document.createElement("div");d.className="col-12 col-md-auto";let h=document.createElement("ul");if(h.className="pagination",d.append(h),c.append(d),o<7)for(let e=1;e<=o;e++){let t=l(r,e,i,s);h.append(t)}else{let e=l(r,1,i,s);if(h.append(e),r<4){for(let e=2;e<5;e++){let t=l(r,e,i,s);h.append(t)}let e=document.createElement("li"),t=document.createElement("a");t.innerHTML="..",e.append(t),h.append(e),e=l(r,o,i,s),h.append(e)}if(r>=4){e=document.createElement("li");let t=document.createElement("a");if(t.innerHTML="..",e.append(t),h.append(e),r<o-3){for(let e=r-1;e<r+2;e++){let t=l(r,e,i,s);h.append(t)}e=document.createElement("li"),t=document.createElement("a"),t.innerHTML="..",e.append(t),h.append(e),e=l(r,o,i,s),h.append(e)}else for(let e=r-1;e<=o;e++){let t=l(r,e,i,s);h.append(t)}}}a.append(c)}function l(e,t,n,r){let o=document.createElement("li"),a=document.createElement("a");return a.innerHTML=t,a.setAttribute("style","cursor:pointer"),a.addEventListener("click",(e=>{n(t,r)})),e==t&&(o.className="active"),o.append(a),o}function d(e,t){let n=document.getElementById("data-table-modal-content");n.innerHTML="";let o=document.getElementById("data-table-modal-pagination");o.innerHTML="";let a=document.getElementById("data-table-modal-page-size").value;r(),document.getElementById("data-modal-table-csv").href=t.wordCloudURL,fetch(t.dataURL+`&page-size=${a}&page=${e}`).then((e=>e.json())).then((e=>{for(let t of e.data){let e=document.createElement("tr"),r="";r=t.text.length>150?t.text.substring(0,150)+"...":t.text;let o=`\n        <td>\n        <small>${t.dateCreated}</small>\n       </td>\n       <td>\n         ${r}\n       </td>\n       <td >\n        <b>${t.sourceLabel}</b>\n       </td>\n       <td class="text-center">\n        ${t.weightedScore.toFixed(4)}\n       </td>\n       <td class="text-center">\n         ${t.sentimentValue.toFixed(4)}\n       </td>\n       <td class="text-center">\n         <a href="#" class="info-button">${t.languageCode}</a>\n       </td>\n        `;e.innerHTML=o,n.append(e)}let r=e.pageSize*(e.currentPage-1)+1;u(r,r+e.pageSize-1,e.total,e.currentPage,e.totalPages,o,d,t)}))}function h(){}function f(e){return null==e?h:function(){return this.querySelector(e)}}function p(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function m(){return[]}function g(e){return null==e?m:function(){return this.querySelectorAll(e)}}function y(e){return function(){return this.matches(e)}}function v(e){return function(t){return t.matches(e)}}var w=Array.prototype.find;function b(){return this.firstElementChild}var _=Array.prototype.filter;function x(){return this.children}function I(e){return new Array(e.length)}function L(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function M(e){return function(){return e}}function S(e,t,n,r,o,a){for(var i,s=0,c=t.length,u=a.length;s<u;++s)(i=t[s])?(i.__data__=a[s],r[s]=i):n[s]=new L(e,a[s]);for(;s<c;++s)(i=t[s])&&(o[s]=i)}function C(e,t,n,r,o,a,i){var s,c,u,l=new Map,d=t.length,h=a.length,f=new Array(d);for(s=0;s<d;++s)(c=t[s])&&(f[s]=u=i.call(c,c.__data__,s,t)+"",l.has(u)?o[s]=c:l.set(u,c));for(s=0;s<h;++s)u=i.call(e,a[s],s,a)+"",(c=l.get(u))?(r[s]=c,c.__data__=a[s],l.delete(u)):n[s]=new L(e,a[s]);for(s=0;s<d;++s)(c=t[s])&&l.get(f[s])===c&&(o[s]=c)}function R(e){return e.__data__}function U(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}L.prototype={constructor:L,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var k="http://www.w3.org/1999/xhtml",D={svg:"http://www.w3.org/2000/svg",xhtml:k,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function T(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),D.hasOwnProperty(t)?{space:D[t],local:e}:e}function E(e){return function(){this.removeAttribute(e)}}function A(e){return function(){this.removeAttributeNS(e.space,e.local)}}function j(e,t){return function(){this.setAttribute(e,t)}}function $(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function P(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function N(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function q(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function F(e){return function(){this.style.removeProperty(e)}}function H(e,t,n){return function(){this.style.setProperty(e,t,n)}}function z(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function B(e,t){return e.style.getPropertyValue(t)||q(e).getComputedStyle(e,null).getPropertyValue(t)}function O(e){return function(){delete this[e]}}function X(e,t){return function(){this[e]=t}}function Y(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function V(e){return e.trim().split(/^|\s+/)}function W(e){return e.classList||new Z(e)}function Z(e){this._node=e,this._names=V(e.getAttribute("class")||"")}function G(e,t){for(var n=W(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function K(e,t){for(var n=W(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function J(e){return function(){G(this,e)}}function Q(e){return function(){K(this,e)}}function ee(e,t){return function(){(t.apply(this,arguments)?G:K)(this,e)}}function te(){this.textContent=""}function ne(e){return function(){this.textContent=e}}function re(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function oe(){this.innerHTML=""}function ae(e){return function(){this.innerHTML=e}}function ie(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function se(){this.nextSibling&&this.parentNode.appendChild(this)}function ce(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ue(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===k&&t.documentElement.namespaceURI===k?t.createElement(e):t.createElementNS(n,e)}}function le(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function de(e){var t=T(e);return(t.local?le:ue)(t)}function he(){return null}function fe(){var e=this.parentNode;e&&e.removeChild(this)}function pe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function me(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ge(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function ye(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function ve(e,t,n){return function(){var r,o=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var i=0,s=o.length;i<s;++i)if((r=o[i]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=t);this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(r):this.__on=[r]}}function we(e,t,n){var r=q(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function be(e,t){return function(){return we(this,e,t)}}function _e(e,t){return function(){return we(this,e,t.apply(this,arguments))}}Z.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var xe=[null];function Ie(e,t){this._groups=e,this._parents=t}function Le(){return new Ie([[document.documentElement]],xe)}Ie.prototype=Le.prototype={constructor:Ie,select:function(e){"function"!=typeof e&&(e=f(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i,s=t[o],c=s.length,u=r[o]=new Array(c),l=0;l<c;++l)(a=s[l])&&(i=e.call(a,a.__data__,l,s))&&("__data__"in a&&(i.__data__=a.__data__),u[l]=i);return new Ie(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:p(t)}}(e):g(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i,s=t[a],c=s.length,u=0;u<c;++u)(i=s[u])&&(r.push(e.call(i,i.__data__,u,s)),o.push(i));return new Ie(r,o)},selectChild:function(e){return this.select(null==e?b:function(e){return function(){return w.call(this.children,e)}}("function"==typeof e?e:v(e)))},selectChildren:function(e){return this.selectAll(null==e?x:function(e){return function(){return _.call(this.children,e)}}("function"==typeof e?e:v(e)))},filter:function(e){"function"!=typeof e&&(e=y(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i=t[o],s=i.length,c=r[o]=[],u=0;u<s;++u)(a=i[u])&&e.call(a,a.__data__,u,i)&&c.push(a);return new Ie(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,R);var n=t?C:S,r=this._parents,o=this._groups;"function"!=typeof e&&(e=M(e));for(var a=o.length,i=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var l=r[u],d=o[u],h=d.length,f=p(e.call(l,l&&l.__data__,u,r)),m=f.length,g=s[u]=new Array(m),y=i[u]=new Array(m),v=c[u]=new Array(h);n(l,d,g,y,v,f,t);for(var w,b,_=0,x=0;_<m;++_)if(w=g[_]){for(_>=x&&(x=_+1);!(b=y[x])&&++x<m;);w._next=b||null}}return(i=new Ie(i,r))._enter=s,i._exit=c,i},enter:function(){return new Ie(this._enter||this._groups.map(I),this._parents)},exit:function(){return new Ie(this._exit||this._groups.map(I),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,a=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(o=t(o)),null==n?a.remove():n(a),r&&o?r.merge(o).order():o},merge:function(e){if(!(e instanceof Ie))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var c,u=t[s],l=n[s],d=u.length,h=i[s]=new Array(d),f=0;f<d;++f)(c=u[f]||l[f])&&(h[f]=c);for(;s<r;++s)i[s]=t[s];return new Ie(i,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],a=o.length-1,i=o[a];--a>=0;)(r=o[a])&&(i&&4^r.compareDocumentPosition(i)&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=U);for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i,s=n[a],c=s.length,u=o[a]=new Array(c),l=0;l<c;++l)(i=s[l])&&(u[l]=i);u.sort(t)}return new Ie(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,a=t[n],i=0,s=a.length;i<s;++i)(o=a[i])&&e.call(o,o.__data__,i,a);return this},attr:function(e,t){var n=T(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?A:E:"function"==typeof t?n.local?N:P:n.local?$:j)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?F:"function"==typeof t?z:H)(e,t,null==n?"":n)):B(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?O:"function"==typeof t?Y:X)(e,t)):this.node()[e]},classed:function(e,t){var n=V(e+"");if(arguments.length<2){for(var r=W(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?ee:t?J:Q)(n,t))},text:function(e){return arguments.length?this.each(null==e?te:("function"==typeof e?re:ne)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?oe:("function"==typeof e?ie:ae)(e)):this.node().innerHTML},raise:function(){return this.each(se)},lower:function(){return this.each(ce)},append:function(e){var t="function"==typeof e?e:de(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:de(e),r=null==t?he:"function"==typeof t?t:f(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(fe)},clone:function(e){return this.select(e?me:pe)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,a=ge(e+""),i=a.length;if(!(arguments.length<2)){for(s=t?ve:ye,r=0;r<i;++r)this.each(s(a[r],t,n));return this}var s=this.node().__on;if(s)for(var c,u=0,l=s.length;u<l;++u)for(r=0,c=s[u];r<i;++r)if((o=a[r]).type===c.type&&o.name===c.name)return c.value},dispatch:function(e,t){return this.each(("function"==typeof t?_e:be)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],a=0,i=o.length;a<i;++a)(r=o[a])&&(yield r)}};var Me,Se,Ce=Le,Re=n(626),Ue=0,ke=0,De=0,Te=0,Ee=0,Ae=0,je="object"==typeof performance&&performance.now?performance:Date,$e="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Pe(){return Ee||($e(Ne),Ee=je.now()+Ae)}function Ne(){Ee=0}function qe(){this._call=this._time=this._next=null}function Fe(e,t,n){var r=new qe;return r.restart(e,t,n),r}function He(){Ee=(Te=je.now())+Ae,Ue=ke=0;try{!function(){Pe(),++Ue;for(var e,t=Me;t;)(e=Ee-t._time)>=0&&t._call.call(null,e),t=t._next;--Ue}()}finally{Ue=0,function(){for(var e,t,n=Me,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Me=t);Se=e,Be(r)}(),Ee=0}}function ze(){var e=je.now(),t=e-Te;t>1e3&&(Ae-=t,Te=e)}function Be(e){Ue||(ke&&(ke=clearTimeout(ke)),e-Ee>24?(e<1/0&&(ke=setTimeout(He,e-je.now()-Ae)),De&&(De=clearInterval(De))):(De||(Te=je.now(),De=setInterval(ze,1e3)),Ue=1,$e(He)))}function Oe(e,t,n){var r=new qe;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}qe.prototype=Fe.prototype={constructor:qe,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Pe():+n)+(null==t?0:+t),this._next||Se===this||(Se?Se._next=this:Me=this,Se=this),this._call=e,this._time=n,Be()},stop:function(){this._call&&(this._call=null,this._time=1/0,Be())}};var Xe=(0,Re.Z)("start","end","cancel","interrupt"),Ye=[];function Ve(e,t,n,r,o,a){var i=e.__transition;if(i){if(n in i)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function a(c){var u,l,d,h;if(1!==n.state)return s();for(u in o)if((h=o[u]).name===n.name){if(3===h.state)return Oe(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[u]):+u<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[u])}if(Oe((function(){3===n.state&&(n.state=4,n.timer.restart(i,n.delay,n.time),i(c))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),u=0,l=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++l]=h);r.length=l+1}}function i(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),a=-1,i=r.length;++a<i;)r[a].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=Fe((function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:o,on:Xe,tween:Ye,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function We(e,t){var n=Ge(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Ze(e,t){var n=Ge(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Ge(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ke(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Je,Qe=180/Math.PI,et={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tt(e,t,n,r,o,a){var i,s,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*Qe,skewX:Math.atan(c)*Qe,scaleX:i,scaleY:s}}function nt(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(a,i){var s=[],c=[];return a=e(a),i=e(i),function(e,r,o,a,i,s){if(e!==o||r!==a){var c=i.push("translate(",null,t,null,n);s.push({i:c-4,x:Ke(e,o)},{i:c-2,x:Ke(r,a)})}else(o||a)&&i.push("translate("+o+t+a+n)}(a.translateX,a.translateY,i.translateX,i.translateY,s,c),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(o(n)+"rotate(",null,r)-2,x:Ke(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(a.rotate,i.rotate,s,c),function(e,t,n,a){e!==t?a.push({i:n.push(o(n)+"skewX(",null,r)-2,x:Ke(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(a.skewX,i.skewX,s,c),function(e,t,n,r,a,i){if(e!==n||t!==r){var s=a.push(o(a)+"scale(",null,",",null,")");i.push({i:s-4,x:Ke(e,n)},{i:s-2,x:Ke(t,r)})}else 1===n&&1===r||a.push(o(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,i.scaleX,i.scaleY,s,c),a=i=null,function(e){for(var t,n=-1,r=c.length;++n<r;)s[(t=c[n]).i]=t.x(e);return s.join("")}}}var rt=nt((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?et:tt(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),ot=nt((function(e){return null==e?et:(Je||(Je=document.createElementNS("http://www.w3.org/2000/svg","g")),Je.setAttribute("transform",e),(e=Je.transform.baseVal.consolidate())?tt((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):et)}),", ",")",")");function at(e,t){var n,r;return function(){var o=Ze(this,e),a=o.tween;if(a!==n)for(var i=0,s=(r=n=a).length;i<s;++i)if(r[i].name===t){(r=r.slice()).splice(i,1);break}o.tween=r}}function it(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var a=Ze(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},c=0,u=o.length;c<u;++c)if(o[c].name===t){o[c]=s;break}c===u&&o.push(s)}a.tween=o}}function st(e,t,n){var r=e._id;return e.each((function(){var e=Ze(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Ge(e,r).value[t]}}function ct(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ut(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function lt(){}var dt=.7,ht=1/dt,ft="\\s*([+-]?\\d+)\\s*",pt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",mt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gt=/^#([0-9a-f]{3,8})$/,yt=new RegExp("^rgb\\("+[ft,ft,ft]+"\\)$"),vt=new RegExp("^rgb\\("+[mt,mt,mt]+"\\)$"),wt=new RegExp("^rgba\\("+[ft,ft,ft,pt]+"\\)$"),bt=new RegExp("^rgba\\("+[mt,mt,mt,pt]+"\\)$"),_t=new RegExp("^hsl\\("+[pt,mt,mt]+"\\)$"),xt=new RegExp("^hsla\\("+[pt,mt,mt,pt]+"\\)$"),It={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Lt(){return this.rgb().formatHex()}function Mt(){return this.rgb().formatRgb()}function St(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=gt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Ct(t):3===n?new Dt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Rt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Rt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=yt.exec(e))?new Dt(t[1],t[2],t[3],1):(t=vt.exec(e))?new Dt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=wt.exec(e))?Rt(t[1],t[2],t[3],t[4]):(t=bt.exec(e))?Rt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=_t.exec(e))?jt(t[1],t[2]/100,t[3]/100,1):(t=xt.exec(e))?jt(t[1],t[2]/100,t[3]/100,t[4]):It.hasOwnProperty(e)?Ct(It[e]):"transparent"===e?new Dt(NaN,NaN,NaN,0):null}function Ct(e){return new Dt(e>>16&255,e>>8&255,255&e,1)}function Rt(e,t,n,r){return r<=0&&(e=t=n=NaN),new Dt(e,t,n,r)}function Ut(e){return e instanceof lt||(e=St(e)),e?new Dt((e=e.rgb()).r,e.g,e.b,e.opacity):new Dt}function kt(e,t,n,r){return 1===arguments.length?Ut(e):new Dt(e,t,n,null==r?1:r)}function Dt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Tt(){return"#"+At(this.r)+At(this.g)+At(this.b)}function Et(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function At(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function jt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Pt(e,t,n,r)}function $t(e){if(e instanceof Pt)return new Pt(e.h,e.s,e.l,e.opacity);if(e instanceof lt||(e=St(e)),!e)return new Pt;if(e instanceof Pt)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,c=(a+o)/2;return s?(i=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=c<.5?a+o:2-a-o,i*=60):s=c>0&&c<1?0:i,new Pt(i,s,c,e.opacity)}function Pt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Nt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function qt(e,t,n,r,o){var a=e*e,i=a*e;return((1-3*e+3*a-i)*t+(4-6*a+3*i)*n+(1+3*e+3*a-3*i)*r+i*o)/6}ct(lt,St,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Lt,formatHex:Lt,formatHsl:function(){return $t(this).formatHsl()},formatRgb:Mt,toString:Mt}),ct(Dt,kt,ut(lt,{brighter:function(e){return e=null==e?ht:Math.pow(ht,e),new Dt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?dt:Math.pow(dt,e),new Dt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tt,formatHex:Tt,formatRgb:Et,toString:Et})),ct(Pt,(function(e,t,n,r){return 1===arguments.length?$t(e):new Pt(e,t,n,null==r?1:r)}),ut(lt,{brighter:function(e){return e=null==e?ht:Math.pow(ht,e),new Pt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?dt:Math.pow(dt,e),new Pt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Dt(Nt(e>=240?e-240:e+120,o,r),Nt(e,o,r),Nt(e<120?e+240:e-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Ft=e=>()=>e;function Ht(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Ft(isNaN(e)?t:e)}var zt=function e(t){var n=function(e){return 1==(e=+e)?Ht:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Ft(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=kt(e)).r,(t=kt(t)).r),o=n(e.g,t.g),a=n(e.b,t.b),i=Ht(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=a(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function Bt(e){return function(t){var n,r,o=t.length,a=new Array(o),i=new Array(o),s=new Array(o);for(n=0;n<o;++n)r=kt(t[n]),a[n]=r.r||0,i[n]=r.g||0,s[n]=r.b||0;return a=e(a),i=e(i),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=i(e),r.b=s(e),r+""}}}Bt((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],a=e[r+1],i=r>0?e[r-1]:2*o-a,s=r<t-1?e[r+2]:2*a-o;return qt((n-r/t)*t,i,o,a,s)}})),Bt((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],a=e[r%t],i=e[(r+1)%t],s=e[(r+2)%t];return qt((n-r/t)*t,o,a,i,s)}}));var Ot=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xt=new RegExp(Ot.source,"g");function Yt(e,t){var n,r,o,a=Ot.lastIndex=Xt.lastIndex=0,i=-1,s=[],c=[];for(e+="",t+="";(n=Ot.exec(e))&&(r=Xt.exec(t));)(o=r.index)>a&&(o=t.slice(a,o),s[i]?s[i]+=o:s[++i]=o),(n=n[0])===(r=r[0])?s[i]?s[i]+=r:s[++i]=r:(s[++i]=null,c.push({i:i,x:Ke(n,r)})),a=Xt.lastIndex;return a<t.length&&(o=t.slice(a),s[i]?s[i]+=o:s[++i]=o),s.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(e){return function(){return e}}(t):(t=c.length,function(e){for(var n,r=0;r<t;++r)s[(n=c[r]).i]=n.x(e);return s.join("")})}function Vt(e,t){var n;return("number"==typeof t?Ke:t instanceof St?zt:(n=St(t))?(t=n,zt):Yt)(e,t)}function Wt(e){return function(){this.removeAttribute(e)}}function Zt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gt(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttribute(e);return i===a?null:i===r?o:o=t(r=i,n)}}function Kt(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===r?o:o=t(r=i,n)}}function Jt(e,t,n){var r,o,a;return function(){var i,s,c=n(this);if(null!=c)return(i=this.getAttribute(e))===(s=c+"")?null:i===r&&s===o?a:(o=s,a=t(r=i,c));this.removeAttribute(e)}}function Qt(e,t,n){var r,o,a;return function(){var i,s,c=n(this);if(null!=c)return(i=this.getAttributeNS(e.space,e.local))===(s=c+"")?null:i===r&&s===o?a:(o=s,a=t(r=i,c));this.removeAttributeNS(e.space,e.local)}}function en(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function tn(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function nn(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&tn(e,o)),n}return o._value=t,o}function rn(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&en(e,o)),n}return o._value=t,o}function on(e,t){return function(){We(this,e).delay=+t.apply(this,arguments)}}function an(e,t){return t=+t,function(){We(this,e).delay=t}}function sn(e,t){return function(){Ze(this,e).duration=+t.apply(this,arguments)}}function cn(e,t){return t=+t,function(){Ze(this,e).duration=t}}function un(e,t){if("function"!=typeof t)throw new Error;return function(){Ze(this,e).ease=t}}function ln(e,t,n){var r,o,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?We:Ze;return function(){var i=a(this,e),s=i.on;s!==r&&(o=(r=s).copy()).on(t,n),i.on=o}}var dn=Ce.prototype.constructor;function hn(e){return function(){this.style.removeProperty(e)}}function fn(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function pn(e,t,n){var r,o;function a(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&fn(e,a,n)),r}return a._value=t,a}function mn(e){return function(t){this.textContent=e.call(this,t)}}function gn(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&mn(r)),t}return r._value=e,r}var yn=0;function vn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function wn(){return++yn}var bn=Ce.prototype;vn.prototype=function(e){return Ce().transition(e)}.prototype={constructor:vn,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=f(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var s,c,u=r[i],l=u.length,d=a[i]=new Array(l),h=0;h<l;++h)(s=u[h])&&(c=e.call(s,s.__data__,h,u))&&("__data__"in s&&(c.__data__=s.__data__),d[h]=c,Ve(d[h],t,n,h,d,Ge(s,n)));return new vn(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=g(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var c,u=r[s],l=u.length,d=0;d<l;++d)if(c=u[d]){for(var h,f=e.call(c,c.__data__,d,u),p=Ge(c,n),m=0,y=f.length;m<y;++m)(h=f[m])&&Ve(h,t,n,m,f,p);a.push(f),i.push(c)}return new vn(a,i,t,n)},filter:function(e){"function"!=typeof e&&(e=y(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i=t[o],s=i.length,c=r[o]=[],u=0;u<s;++u)(a=i[u])&&e.call(a,a.__data__,u,i)&&c.push(a);return new vn(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var c,u=t[s],l=n[s],d=u.length,h=i[s]=new Array(d),f=0;f<d;++f)(c=u[f]||l[f])&&(h[f]=c);for(;s<r;++s)i[s]=t[s];return new vn(i,this._parents,this._name,this._id)},selection:function(){return new dn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=wn(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i,s=r[a],c=s.length,u=0;u<c;++u)if(i=s[u]){var l=Ge(i,t);Ve(i,e,n,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new vn(r,this._parents,e,n)},call:bn.call,nodes:bn.nodes,node:bn.node,size:bn.size,empty:bn.empty,each:bn.each,on:function(e,t){var n=this._id;return arguments.length<2?Ge(this.node(),n).on.on(e):this.each(ln(n,e,t))},attr:function(e,t){var n=T(e),r="transform"===n?ot:Vt;return this.attrTween(e,"function"==typeof t?(n.local?Qt:Jt)(n,r,st(this,"attr."+e,t)):null==t?(n.local?Zt:Wt)(n):(n.local?Kt:Gt)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=T(e);return this.tween(n,(r.local?nn:rn)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?rt:Vt;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var a=B(this,e),i=(this.style.removeProperty(e),B(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}(e,r)).on("end.style."+e,hn(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,o,a;return function(){var i=B(this,e),s=n(this),c=s+"";return null==s&&(this.style.removeProperty(e),c=s=B(this,e)),i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s))}}(e,r,st(this,"style."+e,t))).each(function(e,t){var n,r,o,a,i="style."+t,s="end."+i;return function(){var c=Ze(this,e),u=c.on,l=null==c.value[i]?a||(a=hn(t)):void 0;u===n&&o===l||(r=(n=u).copy()).on(s,o=l),c.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,a=n+"";return function(){var i=B(this,e);return i===a?null:i===r?o:o=t(r=i,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,pn(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(st(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,gn(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=Ge(this.node(),n).tween,a=0,i=o.length;a<i;++a)if((r=o[a]).name===e)return r.value;return null}return this.each((null==t?at:it)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?on:an)(t,e)):Ge(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?sn:cn)(t,e)):Ge(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(un(t,e)):Ge(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Ze(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise((function(a,i){var s={value:i},c={value:function(){0==--o&&a()}};n.each((function(){var n=Ze(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),n.on=t})),0===o&&a()}))},[Symbol.iterator]:bn[Symbol.iterator]};var _n={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function xn(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Ce.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,o,a=e.__transition,i=!0;if(a){for(o in t=null==t?null:t+"",a)(n=a[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[o]):i=!1;i&&delete e.__transition}}(this,e)}))},Ce.prototype.transition=function(e){var t,n;e instanceof vn?(t=e._id,e=e._name):(t=wn(),(n=_n).time=Pe(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i,s=r[a],c=s.length,u=0;u<c;++u)(i=s[u])&&Ve(i,e,t,u,s,n||xn(i,t));return new vn(r,this._parents,e,t)};const{abs:In,max:Ln,min:Mn}=Math;function Sn(e){return{type:e}}["w","e"].map(Sn),["n","s"].map(Sn),["n","w","e","s","nw","ne","sw","se"].map(Sn);var Cn=Math.sqrt(50),Rn=Math.sqrt(10),Un=Math.sqrt(2);function kn(e,t,n){var r=(t-e)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,o);return o>=0?(a>=Cn?10:a>=Rn?5:a>=Un?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(a>=Cn?10:a>=Rn?5:a>=Un?2:1)}function Dn(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Tn(e){let t=e,n=e;function r(e,t,r,o){for(null==r&&(r=0),null==o&&(o=e.length);r<o;){const a=r+o>>>1;n(e[a],t)<0?r=a+1:o=a}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>Dn(e(t),n)}(e)),{left:r,center:function(e,n,o,a){null==o&&(o=0),null==a&&(a=e.length);const i=r(e,n,o,a-1);return i>o&&t(e[i-1],n)>-t(e[i],n)?i-1:i},right:function(e,t,r,o){for(null==r&&(r=0),null==o&&(o=e.length);r<o;){const a=r+o>>>1;n(e[a],t)>0?o=a:r=a+1}return r}}}const En=Tn(Dn),An=En.right;En.left,Tn((function(e){return null===e?NaN:+e})).center;var jn=An;function $n(e,t){var n,r=t?t.length:0,o=e?Math.min(r,e.length):0,a=new Array(o),i=new Array(r);for(n=0;n<o;++n)a[n]=Fn(e[n],t[n]);for(;n<r;++n)i[n]=t[n];return function(e){for(n=0;n<o;++n)i[n]=a[n](e);return i}}function Pn(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Nn(e,t){var n,r={},o={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Fn(e[n],t[n]):o[n]=t[n];return function(e){for(n in r)o[n]=r[n](e);return o}}function qn(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,o=t.slice();return function(a){for(n=0;n<r;++n)o[n]=e[n]*(1-a)+t[n]*a;return o}}function Fn(e,t){var n,r,o=typeof t;return null==t||"boolean"===o?Ft(t):("number"===o?Ke:"string"===o?(n=St(t))?(t=n,zt):Yt:t instanceof St?zt:t instanceof Date?Pn:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?$n:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Nn:Ke:qn))(e,t)}function Hn(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function zn(e){return+e}var Bn=[0,1];function On(e){return e}function Xn(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Yn(e,t,n){var r=e[0],o=e[1],a=t[0],i=t[1];return o<r?(r=Xn(o,r),a=n(i,a)):(r=Xn(r,o),a=n(a,i)),function(e){return a(r(e))}}function Vn(e,t,n){var r=Math.min(e.length,t.length)-1,o=new Array(r),a=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)o[i]=Xn(e[i],e[i+1]),a[i]=n(t[i],t[i+1]);return function(t){var n=jn(e,t,1,r)-1;return a[n](o[n](t))}}function Wn(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Zn(){return function(){var e,t,n,r,o,a,i=Bn,s=Bn,c=Fn,u=On;function l(){var e,t,n,c=Math.min(i.length,s.length);return u!==On&&(e=i[0],t=i[c-1],e>t&&(n=e,e=t,t=n),u=function(n){return Math.max(e,Math.min(t,n))}),r=c>2?Vn:Yn,o=a=null,d}function d(t){return null==t||isNaN(t=+t)?n:(o||(o=r(i.map(e),s,c)))(e(u(t)))}return d.invert=function(n){return u(t((a||(a=r(s,i.map(e),Ke)))(n)))},d.domain=function(e){return arguments.length?(i=Array.from(e,zn),l()):i.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),l()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),c=Hn,l()},d.clamp=function(e){return arguments.length?(u=!!e||On,l()):u!==On},d.interpolate=function(e){return arguments.length?(c=e,l()):c},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,l()}}()(On,On)}function Gn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var Kn,Jn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qn(e){if(!(t=Jn.exec(e)))throw new Error("invalid format: "+e);var t;return new er({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function er(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function tr(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function nr(e){return(e=tr(Math.abs(e)))?e[1]:NaN}function rr(e,t){var n=tr(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}Qn.prototype=er.prototype,er.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var or={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>rr(100*e,t),r:rr,s:function(e,t){var n=tr(e,t);if(!n)return e+"";var r=n[0],o=n[1],a=o-(Kn=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,i=r.length;return a===i?r:a>i?r+new Array(a-i+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+tr(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ar(e){return e}var ir,sr,cr,ur=Array.prototype.map,lr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function dr(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,o,a,i,s=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(o=e,e=t,t=o),0===(i=kn(e,t,n))||!isFinite(i))return[];if(i>0){let n=Math.round(e/i),r=Math.round(t/i);for(n*i<e&&++n,r*i>t&&--r,a=new Array(o=r-n+1);++s<o;)a[s]=(n+s)*i}else{i=-i;let n=Math.round(e*i),r=Math.round(t*i);for(n/i<e&&++n,r/i>t&&--r,a=new Array(o=r-n+1);++s<o;)a[s]=(n+s)/i}return r&&a.reverse(),a}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return function(e,t,n,r){var o,a=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/o;return a>=Cn?o*=10:a>=Rn?o*=5:a>=Un&&(o*=2),t<e?-o:o}(e,t,n);switch((r=Qn(null==r?",f":r)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(o=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(nr(t)/3)))-nr(Math.abs(e)))}(a,i))||(r.precision=o),cr(r,i);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,nr(t)-nr(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=function(e){return Math.max(0,-nr(Math.abs(e)))}(a))||(r.precision=o-2*("%"===r.type))}return sr(r)}(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,o,a=t(),i=0,s=a.length-1,c=a[i],u=a[s],l=10;for(u<c&&(o=c,c=u,u=o,o=i,i=s,s=o);l-- >0;){if((o=kn(c,u,n))===r)return a[i]=c,a[s]=u,t(a);if(o>0)c=Math.floor(c/o)*o,u=Math.ceil(u/o)*o;else{if(!(o<0))break;c=Math.ceil(c*o)/o,u=Math.floor(u*o)/o}r=o}return e},e}function hr(){var e=Zn();return e.copy=function(){return Wn(e,hr())},Gn.apply(e,arguments),dr(e)}function fr(e,t,n){this.k=e,this.x=t,this.y=n}ir=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?ar:(t=ur.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var o=e.length,a=[],i=0,s=t[0],c=0;o>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(e.substring(o-=s,o+s)),!((c+=s+1)>r));)s=t[i=(i+1)%t.length];return a.reverse().join(n)}),o=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?ar:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(ur.call(e.numerals,String)),c=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"−":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=Qn(e)).fill,n=e.align,d=e.sign,h=e.symbol,f=e.zero,p=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):or[v]||(void 0===g&&(g=12),y=!0,v="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var w="$"===h?o:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===h?a:/[%p]/.test(v)?c:"",_=or[v],x=/[defgprs%]/.test(v);function I(e){var o,a,c,h=w,I=b;if("c"===v)I=_(e)+I,e="";else{var L=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:_(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,o=-1;r<n;++r)switch(e[r]){case".":o=t=r;break;case"0":0===o&&(o=r),t=r;break;default:if(!+e[r])break e;o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(t+1):e}(e)),L&&0==+e&&"+"!==d&&(L=!1),h=(L?"("===d?d:u:"-"===d||"("===d?"":d)+h,I=("s"===v?lr[8+Kn/3]:"")+I+(L&&"("===d?")":""),x)for(o=-1,a=e.length;++o<a;)if(48>(c=e.charCodeAt(o))||c>57){I=(46===c?i+e.slice(o+1):e.slice(o))+I,e=e.slice(0,o);break}}m&&!f&&(e=r(e,1/0));var M=h.length+e.length+I.length,S=M<p?new Array(p-M+1).join(t):"";switch(m&&f&&(e=r(S+e,S.length?p-I.length:1/0),S=""),n){case"<":e=h+e+I+S;break;case"=":e=h+S+e+I;break;case"^":e=S.slice(0,M=S.length>>1)+h+e+I+S.slice(M);break;default:e=S+h+e+I}return s(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),I.toString=function(){return e+""},I}return{format:d,formatPrefix:function(e,t){var n=d(((e=Qn(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(nr(t)/3))),o=Math.pow(10,-r),a=lr[8+r/3];return function(e){return n(o*e)+a}}}}({thousands:",",grouping:[3],currency:["$",""]}),sr=ir.format,cr=ir.formatPrefix,fr.prototype={constructor:fr,scale:function(e){return 1===e?this:new fr(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new fr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new fr(1,0,0),fr.prototype;var pr=n(929),mr=n.n(pr);function gr(e){let t=document.querySelector("#word-cloud-modal-container");t.innerHTML="Loading...",fetch(e).then((e=>e.json())).then((e=>{let n=.8*window.innerWidth,r=.7*window.innerHeight;if(t.innerHTML="",e[0]){let t=e[0].keywordCount;var o=hr().domain([10,t]).range(["lightblue","steelblue"]),a=mr()().size([n,r]).words(e.map((function(e){return{text:e.keyword,size:e.keywordCount/t*180,keyCount:e.keywordCount}}))).padding(5).rotate((function(){return 90*~~(2*Math.random())})).font("Impact").fontSize((function(e){return e.size})).on("end",(function(e){(function(e){return new Ie([[document.querySelector(e)]],[document.documentElement])})("#word-cloud-modal-container").append("svg").attr("width",n).attr("height",r).append("g").attr("transform","translate("+a.size()[0]/2+","+a.size()[1]/2+")").selectAll("text").data(e).enter().append("text").style("font-size",(function(e){return e.size+"px"})).style("font-family","Impact").style("fill",(function(e){return o(e.keyCount)})).attr("text-anchor","middle").attr("transform",(function(e){return"translate("+[e.x,e.y]+")"})).text((function(e){return e.text}))}));a.start()}else document.querySelector("#word-cloud-modal-container").innerHTML="No keywords available"})).catch((()=>{document.querySelector("#word-cloud-modal-container").innerHTML="No keywords available"}))}let yr,vr,wr=document.querySelector("#overall-sentiment-chart"),br=window.project_id;let _r,xr,Ir,Lr=document.querySelector("#volume-by-source"),Mr={},Sr=document.querySelector("#aspect-count-graphs"),Cr=document.querySelector("#co-occurrence-graph"),Rr=document.querySelector("#aspect-by-sentiment-percentage"),Ur=document.querySelector("#aspect-by-sentiment-percentage-limit");function kr(){o(),xr&&xr.destroy(),Rr.innerHTML="Loading...";let e={series:[],chart:{type:"bar",height:440,stacked:!0,stackType:"100%",events:{dataPointSelection:function(e,t,n){let o=n.w.config.xaxis.categories[n.dataPointIndex],a=n.w.config.series[n.seriesIndex].name,i={};i.aspect=o,i.sentiment=a.toLowerCase();let s=r();document.querySelector("#data-table-modal").style.display="block";let c=`/api/data-per-aspect/${window.project_id}/?format=word-cloud&`+new URLSearchParams({sentiment:encodeURIComponent(i.sentiment),"aspect-label":encodeURIComponent(i.aspect),languages:encodeURIComponent(s.languages),sources:s.sources,sourcesID:s.sourcesID,"date-from":s.dateFrom,"date-to":s.dateTo});i.csvURL=`/api/data-per-aspect/${window.project_id}/?format=csv&`+new URLSearchParams({sentiment:encodeURIComponent(i.sentiment),"aspect-label":encodeURIComponent(i.aspect),languages:encodeURIComponent(s.languages),sources:s.sources,sourcesID:s.sourcesID,"date-from":s.dateFrom,"date-to":s.dateTo}),i.dataURL=`/api/data-per-aspect/${window.project_id}/?`+new URLSearchParams({sentiment:encodeURIComponent(i.sentiment),"aspect-label":encodeURIComponent(i.aspect),"date-from":s.dateFrom,"date-to":s.dateTo,languages:encodeURIComponent(s.languages),sources:s.sources,sourcesID:s.sourcesID}),gr(c),d(1,i)}}},plotOptions:{bar:{horizontal:!0,borderRadius:6,barHeight:"50"}},stroke:{width:1,colors:["#fff"]},xaxis:{categories:[]},tooltip:{y:{formatter:function(e){return e}}},fill:{opacity:1},legend:{show:!1},colors:[t().positive,t().neutral,t().negative]},n=r(),i=new URLSearchParams({"date-from":n.dateFrom,"date-to":n.dateTo,languages:n.languages,sources:n.sources,sourcesID:n.sourcesID,limit:Ur.value});fetch(`/api/sentiment-per-aspect/${window.project_id}/?`+i).then((e=>e.json())).then((t=>{let n={name:"Positive",data:[]},r={name:"Neutral",data:[]},o={name:"Negative",data:[]},i=[];for(let e of t)n.data.push(e.positiveCount),o.data.push(e.negativeCount),r.data.push(e.neutralCount),i.push(e.aspectLabel);e.series.push(n,r,o),e.xaxis.categories=i,Rr.innerHTML="",0!==Object.keys(t).length&&(xr=new ApexCharts(Rr,e),xr.render()),a()}))}Ur.addEventListener("change",(e=>{kr()}));let Dr,Tr=document.querySelector("#aspect-by-sentiment-absolute"),Er=document.querySelector("#aspect-by-sentiment-absolute-limit");function Ar(){o(),Ir&&Ir.destroy(),Tr.innerHTML="Loading...";var e={series:[],chart:{type:"bar",height:440,stacked:!0,events:{dataPointSelection:function(e,t,n){let o=n.w.config.xaxis.categories[n.dataPointIndex],a=n.w.config.series[n.seriesIndex].data[n.dataPointIndex],i={};i.sentiment=a>0?"positive":"negative",i.aspect=o;let s=r();document.querySelector("#data-table-modal").style.display="block";let c=`/api/data-per-aspect/${window.project_id}/?format=word-cloud&`+new URLSearchParams({sentiment:encodeURIComponent(i.sentiment),"aspect-label":encodeURIComponent(i.aspect),languages:encodeURIComponent(s.languages),sources:s.sources,sourcesID:s.sourcesID,"date-from":s.dateFrom,"date-to":s.dateTo});i.csvURL=`/api/data-per-aspect/${window.project_id}/?format=csv&`+new URLSearchParams({sentiment:encodeURIComponent(i.sentiment),"aspect-label":encodeURIComponent(i.aspect),languages:encodeURIComponent(s.languages),sources:s.sources,sourcesID:s.sourcesID,"date-from":s.dateFrom,"date-to":s.dateTo}),i.dataURL=`/api/data-per-aspect/${window.project_id}/?`+new URLSearchParams({sentiment:encodeURIComponent(i.sentiment),"aspect-label":encodeURIComponent(i.aspect),"date-from":s.dateFrom,"date-to":s.dateTo,languages:encodeURIComponent(s.languages),sources:s.sources,sourcesID:s.sourcesID}),gr(c),d(1,i)}}},legend:{show:!1},colors:["#28C76F","#EA5455"],plotOptions:{bar:{horizontal:!0,borderRadius:6,barHeight:"50"}},dataLabels:{enabled:!1},stroke:{width:1,colors:["#fff"]},grid:{xaxis:{lines:{show:!1}}},yaxis:{min:-85,max:85,title:{}},tooltip:{shared:!1,x:{formatter:function(e){return e}},y:{formatter:function(e){return Math.abs(e)}}},xaxis:{categories:[],labels:{formatter:function(e){return Math.abs(Math.round(e))}}}};let t=r(),n=new URLSearchParams({"date-from":t.dateFrom,"date-to":t.dateTo,languages:t.languages,sources:t.sources,sourcesID:t.sourcesID,limit:Er.value});fetch(`/api/sentiment-per-aspect/${window.project_id}/?`+n).then((e=>e.json())).then((t=>{let n=[],r=[],o=[],i=0,s=0;for(let e of t)n.push(e.positiveCount),r.push(-e.negativeCount),o.push(e.aspectLabel),e.positiveCount>i&&(i=e.positiveCount),e.negativeCount>s&&(s=e.negativeCount);e.series.push({name:"Positives",data:n}),e.series.push({name:"Negatives",data:r}),e.yaxis.max=i+Math.round(.1*i),e.yaxis.min=-s-Math.round(.1*s),e.xaxis.categories=o,Tr.innerHTML="",0!==Object.keys(t).length&&(Ir=new ApexCharts(Tr,e),Ir.render()),a()}))}Er.addEventListener("change",(e=>{Ar()}));let jr,$r=1,Pr=document.querySelector("#sentiment-trend-graph"),Nr=window.project_id,qr=!0;function Fr(){if(qr)qr=!1,fetch(`/api/aspect-count/${Nr}/?order-by=label`).then((e=>e.json())).then((e=>{let t=!0,n=document.querySelector("#aspect-topic-tree-map-aspects");for(let r of e){let e=document.createElement("option");t&&(e.selected=!0,t=!1),e.value=r.aspectLabel,e.innerHTML=r.aspectLabel,n.append(e)}Fr()}));else{o(),jr&&jr.destroy();let e=r(),t=document.querySelector("#aspect-topic-tree-map-aspects").value,n=document.querySelector("#aspect-topic-tree-map-max-topics").value,i=document.querySelector("#aspect-topic-tree-map-sentiment").value,s=new URLSearchParams({"date-from":e.dateFrom,"date-to":e.dateTo,languages:e.languages,sources:e.sources,sourcesID:e.sourcesID,"aspect-label":encodeURIComponent(t),"max-topics":encodeURIComponent(n),sentiment:i});fetch(`/api/topics-per-aspect/${Nr}/?`+s).then((e=>e.json())).then((n=>{let o=[];for(let e of n)o.push({x:e.topicLabel,y:e.topicCount});let s={series:[],legend:{show:!1},chart:{height:480,type:"treemap",events:{dataPointSelection:function(n,o,a){let c=a.w.config.series[0].data[a.dataPointIndex].x;document.querySelector("#data-table-modal").style.display="block",e=r();let u=`/api/data-per-aspect-topic/${window.project_id}/?format=word-cloud&`+new URLSearchParams({"aspect-label":encodeURIComponent(t),"topic-label":encodeURIComponent(c),sentiment:i,"date-from":e.dateFrom,"date-to":e.dateTo,languages:encodeURIComponent(e.languages),sources:e.sources,sourcesID:e.sourcesID});s.csvURL=`/api/data-per-aspect-topic/${window.project_id}/?format=csv&`+new URLSearchParams({"aspect-label":encodeURIComponent(t),"topic-label":encodeURIComponent(c),sentiment:i,"date-from":e.dateFrom,"date-to":e.dateTo,languages:encodeURIComponent(e.languages),sources:e.sources,sourcesID:e.sourcesID}),s.dataURL=`/api/data-per-aspect-topic/${window.project_id}/?`+new URLSearchParams({"aspect-label":encodeURIComponent(t),"topic-label":encodeURIComponent(c),sentiment:i,"date-from":e.dateFrom,"date-to":e.dateTo,languages:encodeURIComponent(e.languages),sources:e.sources,sourcesID:e.sourcesID}),gr(u),d(1,s)}}}};s.series.push({data:o}),0!==Object.keys(n).length&&(jr=new ApexCharts(document.querySelector("#aspect-topic-tree-map-container"),s),jr.render()),a()}))}}document.querySelector("#aspect-topic-tree-map-aspects").addEventListener("change",(e=>{Fr()})),document.querySelector("#aspect-topic-tree-map-max-topics").addEventListener("change",(e=>{Fr()})),document.querySelector("#aspect-topic-tree-map-sentiment").addEventListener("change",(e=>{Fr()}));let Hr,zr,Br=document.querySelector("#emotion-aspect-co-occurrence");function Or(){o(),Hr&&Hr.destroy(),Br.innerHTML="Loading...";var e={series:[],chart:{height:480,type:"heatmap"},plotOptions:{heatmap:{shadeIntensity:0,radius:0,colorScale:{ranges:[{from:0,to:20,name:"0-20",color:"#E2E0FB"},{from:20,to:40,name:"20-40",color:"#D4D0FA"},{from:40,to:60,name:"40-60 ",color:"#C6C1F8"},{from:60,to:80,name:"60-80",color:"#968DF3"},{from:80,to:99,name:"80-99",color:"#8075F1"},{from:100,to:100,name:"100",color:"#7367F0"}]}}},dataLabels:{enabled:!1,style:{fontSize:"14px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:"bold"}},legend:{position:"bottom",markers:{width:30}},stroke:{width:1},xaxis:{type:"category",categories:[]}};let t=window.project_id,n="",i=document.querySelector("#emotion-aspect-co-occurrence-max-emotions").value,s=0,c=r(),u=new URLSearchParams({"date-from":c.dateFrom,"date-to":c.dateTo,languages:c.languages,sourcesID:c.sourcesID});fetch(`/api/entity-aspect-for-emotion/${t}/?`+u).then((e=>e.json())).then((t=>{let r=[],o=[];if(0!==Object.keys(t).length){for(let e of t){if(""!=n&&n!=e.entityLabel&&(r.push({name:n,data:o}),o=[],s++,s==i))break;o.push({x:e.aspectLabel,y:(e.aspectCount/e.entityCount*100).toFixed(2)}),n=e.entityLabel}e.series=r,Hr=new ApexCharts(Br,e),Br.innerHTML="",Hr.render()}else Br.innerHTML="";a()}))}document.querySelector("#emotion-aspect-co-occurrence-max-emotions").addEventListener("change",(()=>{Or()}));let Xr,Yr=document.querySelector("#source-by-sentiment-graph"),Vr=document.querySelector("#source-by-sentiment-max-sources"),Wr={};function Zr(){o(),zr&&zr.destroy(),Yr.innerHTML="Loading...";let e={series:[],chart:{type:"bar",height:440,stacked:!0,stackType:"100%",events:{dataPointSelection:function(e,t,n){let o=n.w.config.xaxis.categories[n.dataPointIndex],a=n.w.config.series[n.seriesIndex].name,i={};i.sourceID=Wr[o],i.sentiment=a.toLowerCase();let s=r();document.querySelector("#data-table-modal").style.display="block";let c=`/api/new-data/project/${window.project_id}/?format=word-cloud&`+new URLSearchParams({sentiment:encodeURIComponent(i.sentiment),languages:encodeURIComponent(s.languages),sources:s.sources,sourcesID:Wr[o],"date-from":s.dateFrom,"date-to":s.dateTo});i.csvURL=`/api/new-data/project/${window.project_id}/?format=csv&`+new URLSearchParams({"date-from":s.dateFrom,"date-to":s.dateTo,languages:encodeURIComponent(s.languages),sources:encodeURIComponent(s.sources),sourcesID:i.sourceID,sentiment:i.sentiment}),i.dataURL=`/api/new-data/project/${window.project_id}/?`+new URLSearchParams({"date-from":s.dateFrom,"date-to":s.dateTo,languages:encodeURIComponent(s.languages),sources:encodeURIComponent(s.sources),sourcesID:i.sourceID,sentiment:i.sentiment}),gr(c),d(1,i)}}},plotOptions:{bar:{horizontal:!0,borderRadius:6,barHeight:"50"}},stroke:{width:1,colors:["#fff"]},xaxis:{categories:[]},tooltip:{y:{formatter:function(e){return e}}},fill:{opacity:1},legend:{show:!1},colors:[t().positive,t().neutral,t().negative]},n=r(),i=new URLSearchParams({"date-from":n.dateFrom,"date-to":n.dateTo,languages:n.languages,sources:n.sources,sourcesID:n.sourcesID,limit:Vr.value});fetch(`/api/source-by-sentiment/${window.project_id}/?`+i).then((e=>e.json())).then((t=>{let n={name:"Positive",data:[]},r={name:"Neutral",data:[]},o={name:"Negative",data:[]},i=[];for(let e of t)n.data.push(e.positiveCount),o.data.push(e.negativeCount),r.data.push(e.neutralCount),i.push(e.sourceLabel),Wr[e.sourceLabel]=e.sourceID;e.series.push(n,r,o),e.xaxis.categories=i,Yr.innerHTML="",zr=new ApexCharts(Yr,e),zr.render(),a()}))}Vr.addEventListener("change",(e=>{Zr()}));let Gr,Kr=document.querySelector("#entity-by-sentiment"),Jr=document.querySelector("#entity-by-sentiment-limit"),Qr={};function eo(){o(),Xr&&Xr.destroy(),Kr.innerHTML="Loading...";let e={series:[],chart:{type:"bar",height:440,stacked:!0,stackType:"100%",events:{dataPointSelection:function(e,t,n){let o=n.w.config.xaxis.categories[n.dataPointIndex],a=n.w.config.series[n.seriesIndex].name,i={};i.entityID=Qr[o],i.sentiment=a.toLowerCase();let s=r();document.querySelector("#data-table-modal").style.display="block";let c=`/api/data-per-entity/${window.project_id}/?format=word-cloud&`+new URLSearchParams({sentiment:encodeURIComponent(i.sentiment),languages:encodeURIComponent(s.languages),sources:s.sources,sourcesID:s.sourcesID,"date-from":s.dateFrom,"date-to":s.dateTo,entityID:Qr[o]});i.csvURL=`/api/data-per-entity/${window.project_id}/?format=csv&`+new URLSearchParams({"date-from":s.dateFrom,"date-to":s.dateTo,languages:encodeURIComponent(s.languages),sources:encodeURIComponent(s.sources),sourcesID:s.sourcesID,sentiment:i.sentiment,entityID:i.entityID}),i.dataURL=`/api/data-per-entity/${window.project_id}/?`+new URLSearchParams({"date-from":s.dateFrom,"date-to":s.dateTo,languages:encodeURIComponent(s.languages),sources:encodeURIComponent(s.sources),sourcesID:s.sourcesID,sentiment:i.sentiment,entityID:i.entityID}),gr(c),d(1,i)}}},plotOptions:{bar:{horizontal:!0,borderRadius:6,barHeight:"50"}},stroke:{width:1,colors:["#fff"]},xaxis:{categories:[]},tooltip:{y:{formatter:function(e){return e}}},fill:{opacity:1},legend:{show:!1},colors:[t().positive,t().neutral,t().negative]},n=r(),i=new URLSearchParams({"date-from":n.dateFrom,"date-to":n.dateTo,languages:n.languages,sources:n.sources,sourcesID:n.sourcesID,limit:Jr.value});fetch(`/api/entity-by-sentiment/${window.project_id}/?`+i).then((e=>e.json())).then((t=>{let n={name:"Positive",data:[]},r={name:"Neutral",data:[]},o={name:"Negative",data:[]},i=[];for(let e of t)n.data.push(e.positiveCount),o.data.push(e.negativeCount),r.data.push(e.neutralCount),i.push(e.entityLabel),Qr[e.entityLabel]=e.entityID;e.series.push(n,r,o),e.xaxis.categories=i,e.chart.height=50*t.length,Kr.innerHTML="",Xr=new ApexCharts(Kr,e),Xr.render(),a()}))}Jr.addEventListener("change",(e=>{eo()}));let to=document.querySelector("#classification-by-sentiment"),no=document.querySelector("#classification-by-sentiment-limit"),ro={};function oo(){o(),Gr&&Gr.destroy(),to.innerHTML="Loading...";let e={series:[],chart:{type:"bar",height:440,stacked:!0,stackType:"100%",events:{dataPointSelection:function(e,t,n){let o=n.w.config.xaxis.categories[n.dataPointIndex],a=n.w.config.series[n.seriesIndex].name,i={};i.classificationID=ro[o],i.sentiment=a.toLowerCase();let s=r();document.querySelector("#data-table-modal").style.display="block";let c=`/api/data-per-classification/${window.project_id}/?format=word-cloud&`+new URLSearchParams({sentiment:encodeURIComponent(i.sentiment),languages:encodeURIComponent(s.languages),sources:s.sources,sourcesID:s.sourcesID,"date-from":s.dateFrom,"date-to":s.dateTo,classificationID:ro[o]});i.csvURL=`/api/data-per-classification/${window.project_id}/?format=csv&`+new URLSearchParams({"date-from":s.dateFrom,"date-to":s.dateTo,languages:encodeURIComponent(s.languages),sources:encodeURIComponent(s.sources),sourcesID:s.sourcesID,sentiment:i.sentiment,classificationID:i.classificationID}),i.dataURL=`/api/data-per-classification/${window.project_id}/?`+new URLSearchParams({"date-from":s.dateFrom,"date-to":s.dateTo,languages:encodeURIComponent(s.languages),sources:encodeURIComponent(s.sources),sourcesID:s.sourcesID,sentiment:i.sentiment,classificationID:i.classificationID}),gr(c),d(1,i)}}},plotOptions:{bar:{horizontal:!0,borderRadius:6,barHeight:"50"}},stroke:{width:1,colors:["#fff"]},xaxis:{categories:[]},tooltip:{y:{formatter:function(e){return e}}},fill:{opacity:1},legend:{show:!1},colors:[t().positive,t().neutral,t().negative]},n=r(),i=new URLSearchParams({"date-from":n.dateFrom,"date-to":n.dateTo,languages:n.languages,sources:n.sources,sourcesID:n.sourcesID,limit:no.value});fetch(`/api/classification-by-sentiment/${window.project_id}/?`+i).then((e=>e.json())).then((t=>{let n={name:"Positive",data:[]},r={name:"Neutral",data:[]},o={name:"Negative",data:[]},i=[];for(let e of t)n.data.push(e.positiveCount),o.data.push(e.negativeCount),r.data.push(e.neutralCount),i.push(e.classificationLabel),ro[e.classificationLabel]=e.classificationID;e.series.push(n,r,o),e.xaxis.categories=i,to.innerHTML="",e.chart.height=50*t.length,Gr=new ApexCharts(to,e),Gr.render(),a()}))}no.addEventListener("change",(e=>{oo()}));let ao=document.querySelector("#most-common-chunks"),io=document.getElementById("entity-table-content"),so=document.getElementById("entity-table-page-size");function co(e){o(),io.innerHTML="Loading...";let t=document.getElementById("entity-table-pagination");t.innerHTML="";let n=so.value,i=r(),s=new URLSearchParams({"date-from":i.dateFrom,"date-to":i.dateTo,languages:i.languages,sources:encodeURIComponent(i.sources),sourcesID:i.sourcesID});document.getElementById("entities-table-csv").href=`/api/entity-classification-count/${window.project_id}/?format=csv&`+s,fetch(`/api/entity-classification-count/${window.project_id}/?page=${e}&page-size=${n}&`+s).then((e=>e.json())).then((e=>{io.innerHTML="";for(let t of e.data){let e=document.createElement("tr"),n=`\n        <td>\n        <a href="#" class="data-link">${t.entityLabel}</a>\n       </td>\n       <td>\n         ${t.classificationLabel}\n       </td>\n       <td class="text-center">\n        <a class="info-button" style="cursor:pointer;" data-entity-id="${t.entityID}" data-classification-id="${t.classificationID}">${t.count}</a>\n       </td>\n        `;e.innerHTML=n,e.querySelector(".info-button").addEventListener("click",(e=>{let t=e.target.getAttribute("data-entity-id"),n=e.target.getAttribute("data-classification-id");document.querySelector("#data-table-modal").style.display="block",i=r();let o=`/api/data-per-classification-and-entity/${window.project_id}/?format=word-cloud&classification=${n}&entity=${t}&`+new URLSearchParams({"date-from":i.dateFrom,"date-to":i.dateTo,languages:encodeURIComponent(i.languages),sources:encodeURIComponent(i.sources),sourcesID:i.sourcesID}),a={};a.csvURL=`/api/data-per-classification-and-entity/${window.project_id}/?format=csv&`+new URLSearchParams({entity:t,classification:n,"date-from":i.dateFrom,"date-to":i.dateTo,languages:encodeURIComponent(i.languages),sources:encodeURIComponent(i.sources),sourcesID:i.sourcesID}),a.dataURL=`/api/data-per-classification-and-entity/${window.project_id}/?`+new URLSearchParams({entity:t,classification:n,"date-from":i.dateFrom,"date-to":i.dateTo,languages:encodeURIComponent(i.languages),sources:encodeURIComponent(i.sources),sourcesID:i.sourcesID}),gr(o),d(1,a)})),io.append(e)}let n=e.pageSize*(e.currentPage-1)+1;u(n,n+e.pageSize-1,e.total,e.currentPage,e.totalPages,t,co),a()}))}function uo(e){o(),function(e){ho.innerHTML="Loading...";let t=document.getElementById("aspect-topic-table-pagination"),n=lo.value;t.innerHTML="";let o=r(),i=new URLSearchParams({"date-from":o.dateFrom,"date-to":o.dateTo,languages:o.languages,sources:o.sources,sourcesID:o.sourcesID});document.getElementById("aspect-topic-table-csv").href=`/api/aspect-topic/project/${window.project_id}/?format=csv&`+i,fetch(`/api/aspect-topic/project/${window.project_id}/?page=${e}&page-size=${n}&`+i).then((e=>e.json())).then((e=>{ho.innerHTML="";for(let t of e.data){let e=document.createElement("tr"),n=`\n            <td>\n            <a href="#" class="data-link">${t.topicLabel}</a>\n           </td>\n           <td>\n             ${t.aspectLabel}\n           </td>\n           <td class="text-center">\n            <a style="cursor:pointer" class="info-button green" data-aspect="${t.aspectLabel}" data-topic="${t.topicLabel}" data-sentiment="positive">${t.positivesCount}</a>\n           </td>\n           <td class="text-center">\n            <a style="cursor:pointer" class="info-button red" data-aspect="${t.aspectLabel}" data-topic="${t.topicLabel}" data-sentiment="negative">${t.negativesCount}</a>\n           </td>\n            `;e.innerHTML=n,ho.append(e)}let n=ho.querySelectorAll("a[data-topic]");for(let e of n)e.addEventListener("click",(e=>{let t=e.target.getAttribute("data-aspect"),n=e.target.getAttribute("data-topic"),o=e.target.getAttribute("data-sentiment");document.querySelector("#data-table-modal").style.display="block";let a=r(),i=`/api/data-per-aspect-topic/${window.project_id}/?format=word-cloud&`+new URLSearchParams({"aspect-label":encodeURIComponent(t),"topic-label":encodeURIComponent(n),sentiment:o,"date-from":a.dateFrom,"date-to":a.dateTo,languages:encodeURIComponent(a.languages),sources:encodeURIComponent(a.sources),sourcesID:a.sourcesID}),s={};s.csvURL=`/api/data-per-aspect-topic/${window.project_id}/?format=csv&`+new URLSearchParams({"aspect-label":encodeURIComponent(t),"topic-label":encodeURIComponent(n),sentiment:o,"date-from":a.dateFrom,"date-to":a.dateTo,languages:encodeURIComponent(a.languages),sources:encodeURIComponent(a.sources),sourcesID:a.sourcesID}),s.dataURL=`/api/data-per-aspect-topic/${window.project_id}/?`+new URLSearchParams({"aspect-label":encodeURIComponent(t),"topic-label":encodeURIComponent(n),sentiment:o,"date-from":a.dateFrom,"date-to":a.dateTo,languages:encodeURIComponent(a.languages),sources:encodeURIComponent(a.sources),sourcesID:a.sourcesID}),gr(i),d(1,s)}));let o=e.pageSize*(e.currentPage-1)+1;u(o,o+e.pageSize-1,e.total,e.currentPage,e.totalPages,t,uo),a()}))}(e)}so.addEventListener("change",(()=>{console.log("test"),co(1)}));let lo=document.querySelector("#aspect-topic-table-page-size"),ho=document.getElementById("aspect-topic-table-content");lo.addEventListener("change",(()=>{uo(1)}));let fo,po=document.getElementById("top-entities-per-aspect-table-content"),mo=!0,go="",yo=document.querySelector("#top-entities-per-aspect-table-aspect"),vo=document.querySelector("#top-entities-per-aspect-table-page-size");function wo(e){if(mo){o();let t=r(),n=new URLSearchParams({"date-from":t.dateFrom,"date-to":t.dateTo,languages:t.languages,sources:encodeURIComponent(t.sources),sourcesID:t.sourcesID,"order-by":"label"});fetch(`/api/aspect-count/${window.project_id}/?`+n).then((e=>e.json())).then((t=>{let n=!0;for(let e of t){let t=document.createElement("option");t.value=e.aspectLabel,t.innerHTML=e.aspectLabel,yo.append(t),n&&(go=e.aspectLabel,n=!1,t.selected=!0)}wo(e)})),a(),mo=!1}else{o(),go=yo.value,po.innerHTML="Loading...";let t=document.getElementById("top-entities-per-aspect-table-pagination");t.innerHTML="";let n=vo.value,i=r(),s=new URLSearchParams({"date-from":i.dateFrom,"date-to":i.dateTo,languages:i.languages,sources:i.sources,"aspect-label":go});document.getElementById("top-entities-per-aspect-table-csv").href=`/api/entity-classification-count/${window.project_id}/?format=csv&aspect-label${go}&`+s,fetch(`/api/entity-classification-count/${window.project_id}/?page=${e}&page-size=${n}&`+s).then((e=>e.json())).then((e=>{po.innerHTML="";for(let t of e.data){let e=document.createElement("tr"),n=`\n            <td>\n            <a href="#" class="data-link">${t.entityLabel}</a>\n           </td>\n           <td>\n             ${t.classificationLabel}\n           </td>\n           <td class="text-center">\n            <a class="info-button" style="cursor:pointer;" data-entity-id="${t.entityID}" data-classification-id="${t.classificationID}">${t.count}</a>\n           </td>\n            `;e.innerHTML=n,e.querySelector(".info-button").addEventListener("click",(e=>{let t=e.target.getAttribute("data-entity-id"),n=e.target.getAttribute("data-classification-id");document.querySelector("#data-table-modal").style.display="block";let o=r(),a=document.querySelector("#top-entities-per-aspect-table-aspect").value,i=`/api/data-per-classification-and-entity/${window.project_id}/?format=word-cloud&classification=${n}&entity=${t}&aspect-label=${a}&`+new URLSearchParams({"date-from":o.dateFrom,"date-to":o.dateTo,languages:encodeURIComponent(o.languages),sources:encodeURIComponent(o.sources),sourcesID:o.sourcesID}),s={};s.csvURL=`/api/data-per-classification-and-entity/${window.project_id}/?format=csv&`+new URLSearchParams({"aspect-label":a,entity:t,classification:n,"date-from":o.dateFrom,"date-to":o.dateTo,languages:encodeURIComponent(o.languages),sources:encodeURIComponent(o.sources),sourcesID:o.sourcesID}),s.dataURL=`/api/data-per-classification-and-entity/${window.project_id}/?`+new URLSearchParams({"aspect-label":a,entity:t,classification:n,"date-from":o.dateFrom,"date-to":o.dateTo,languages:encodeURIComponent(o.languages),sources:encodeURIComponent(o.sources),sourcesID:o.sourcesID}),gr(i),d(1,s)})),po.append(e)}let n=e.pageSize*(e.currentPage-1)+1;u(n,n+e.pageSize-1,e.total,e.currentPage,e.totalPages,t,wo),a()}))}}yo.addEventListener("change",(()=>{wo(1)})),vo.addEventListener("change",(()=>{wo(1)}));let bo="overview-tab",_o=!0,xo=!0,Io=2,Lo=document.querySelector("#tab-loading");function Mo(){_o&&(kr(),Ar(),Fr(),function(){o(),_r&&_r.destroy(),document.querySelector("#aspect-count-graphs").innerHTML="Loading...";let e=r(),n=new URLSearchParams({"date-from":e.dateFrom,"date-to":e.dateTo,languages:e.languages,sources:e.sources,sourcesID:e.sourcesID}),i=window.project_id;fetch(`/api/aspect-count/${i}/?`+n).then((e=>e.json())).then((n=>{let r=0;for(let e of n)r+=e.aspectCount;let o=[],i=[],s=0;for(let e of n)o.push(e.aspectCount),i.push(e.aspectLabel),e.aspectCount>s&&(s=e.aspectCount);let c={series:[],chart:{type:"bar",height:440,stacked:!0,events:{dataPointSelection:function(t,n,r){let o=r.w.config.xaxis.categories[r.dataPointIndex],a={};document.querySelector("#data-table-modal").style.display="block",a.aspectLabel=o;let i=`/api/data-per-aspect/${window.project_id}/?format=word-cloud&`+new URLSearchParams({"date-from":e.dateFrom,"date-to":e.dateTo,"aspect-label":encodeURIComponent(a.aspectLabel),languages:encodeURIComponent(e.languages),sources:encodeURIComponent(e.sources),sourcesID:e.sourcesID});a.csvURL=`/api/data-per-aspect/${window.project_id}/?format=csv&`+new URLSearchParams({"date-from":e.dateFrom,"date-to":e.dateTo,"aspect-label":encodeURIComponent(a.aspectLabel),languages:encodeURIComponent(e.languages),sources:encodeURIComponent(e.sources),sourcesID:e.sourcesID}),a.dataURL=`/api/data-per-aspect/${window.project_id}/?`+new URLSearchParams({"aspect-label":encodeURIComponent(a.aspectLabel),"date-from":e.dateFrom,"date-to":e.dateTo,languages:encodeURIComponent(e.languages),sources:encodeURIComponent(e.sources),sourcesID:e.sourcesID}),gr(i),d(1,a)}}},legend:{show:!1},colors:[t().neutral],plotOptions:{bar:{horizontal:!0,borderRadius:6,barHeight:"50"}},dataLabels:{enabled:!1},stroke:{width:1,colors:["#fff"]},grid:{xaxis:{lines:{show:!1}}},yaxis:{min:-85,max:85,title:{}},tooltip:{shared:!1,x:{formatter:function(e){return e}},y:{formatter:function(e){return Math.abs(e)}}},xaxis:{categories:[],labels:{formatter:function(e){return Math.abs(Math.round(e))}}}};c.series.push({name:"Count",data:o}),c.yaxis={},c.yaxis.max=s+Math.round(.1*s),c.xaxis={},c.xaxis.categories=i,Sr.innerHTML="",c.chart.height=25*n.length,c.chart.height<100&&(c.chart.height=100),0!==Object.keys(n).length&&(_r=new ApexCharts(Sr,c),_r.render()),a()}))}(),Or(),function(){o(),Cr.innerHTML="Loading...";var e={series:[],chart:{height:480,type:"heatmap"},plotOptions:{heatmap:{shadeIntensity:.5,radius:0,colorScale:{ranges:[{from:0,to:20,name:"0-20",color:"#E2E0FB"},{from:20,to:40,name:"20-40",color:"#D4D0FA"},{from:40,to:60,name:"40-60 ",color:"#C6C1F8"},{from:60,to:80,name:"60-80",color:"#968DF3"},{from:80,to:99,name:"80-99",color:"#8075F1"},{from:100,to:100,name:"100",color:"#7367F0"}]}}},dataLabels:{enabled:!1,style:{fontSize:"14px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:"bold"}},legend:{position:"bottom",markers:{width:30}},stroke:{width:1},xaxis:{type:"category",categories:[]}};let t=window.project_id,n=r();fetch(`/api/co-occurence/${t}/?`+new URLSearchParams({languages:encodeURIComponent(n.languages),sources:n.sources,sourcesID:n.sourcesID,"date-from":n.dateFrom,"date-to":n.dateTo})).then((e=>e.json())).then((t=>{e.series=t,Cr.innerHTML="",0!==Object.keys(t).length&&(e.chart.height=50*t.length,e.chart.height<300&&(e.chart.height=300),new ApexCharts(Cr,e).render()),a()}))}(),function(){o(),ao.innerHTML="Loading...";let e=r(),t=new URLSearchParams({"date-from":e.dateFrom,"date-to":e.dateTo,languages:e.languages,sources:e.sources,sourcesID:e.sourcesID});fetch(`/api/most-common-chunks/${window.project_id}/?`+t).then((e=>e.json())).then((e=>{ao.innerHTML="",0!=e.length&&(document.querySelector("#most-common-chunks-graph").style.display="block");for(let t of e){let e=document.createElement("button");e.style.margin="1rem",e.disabled=!0,t.positiveCount>t.negativeCount?(e.className="btn btn-success",e.innerHTML=`${t.chunk} <span class="badge badge-light">${t.positiveCount}</span>`):(e.className="btn btn-danger",e.innerHTML=`${t.chunk} <span class="badge badge-light">${t.negativeCount}</span>`),ao.appendChild(e)}a()}))}()),xo&&(eo(),oo()),function(){o();let e=r(),n=new URLSearchParams({"date-from":e.dateFrom,"date-to":e.dateTo,languages:encodeURIComponent(e.languages),sources:encodeURIComponent(e.sources),sourcesId:e.sourcesId});yr&&yr.destroy(),wr.innerHTML="Loading...",fetch(`/api/project-overview/${br}/?`+n).then((e=>e.json())).then((e=>{wr.innerHTML="",function(e){var n={colors:[t().positive,t().negative,t().neutral],chart:{height:250,type:"donut",events:{dataPointSelection:function(e,t,n){let o=n.w.config.labels[n.dataPointIndex].toLowerCase(),a={};a.sentiment=o;let i=r();document.querySelector("#data-table-modal").style.display="block",gr(`/api/new-data/project/${window.project_id}/?format=word-cloud&`+new URLSearchParams({"date-from":i.dateFrom,"date-to":i.dateTo,sentiment:encodeURIComponent(a.sentiment),languages:encodeURIComponent(i.languages),sources:encodeURIComponent(i.sources),sourcesID:i.sourcesID})),a.csvURL=`/api/new-data/project/${window.project_id}/?format=csv&`+new URLSearchParams({"date-from":i.dateFrom,"date-to":i.dateTo,sentiment:encodeURIComponent(a.sentiment),languages:encodeURIComponent(i.languages),sources:encodeURIComponent(i.sources),sourcesID:i.sourcesID}),a.dataURL=`/api/new-data/project/${window.project_id}/?`+new URLSearchParams({sentiment:encodeURIComponent(a.sentiment),"date-from":i.dateFrom,"date-to":i.dateTo,languages:encodeURIComponent(i.languages),sources:encodeURIComponent(i.sources),sourcesID:i.sourcesID}),d(1,a)}}},dataLabels:{enabled:!1},legend:{position:"left"},plotOptions:{pie:{donut:{labels:{show:!0,total:{showAlways:!0,show:!0}}}},radialBar:{hollow:{size:"60%"}}},labels:["Positive","Negative","Neutral"]};n.series=[e.positivesCount,e.negativesCount,e.neutralsCount],yr=new ApexCharts(wr,n),yr.render()}(e),function(e){let t=document.getElementById("aspect-count"),n=document.getElementById("source-count");t.innerHTML=e.aspectCount,n.innerHTML=e.sourceCount,e.aspectCount>1?document.querySelector("#overall-sentiment-different-aspects").innerHTML="Different Aspects":document.querySelector("#overall-sentiment-different-aspects").innerHTML="Different Aspect",e.sourceCount>1?document.querySelector("#overall-sentiment-different-sources").innerHTML="Different Sources":document.querySelector("#overall-sentiment-different-sources").innerHTML="Different Source"}(e),a()}))}(),function(){o(),Dr&&Dr.destroy(),Pr.innerHTML="Loading...",document.getElementById("sentiment-trend-total").innerHTML=0,document.getElementById("sentiment-trend-total-positives").innerHTML=0,document.getElementById("sentiment-trend-total-negatives").innerHTML=0;var e=window.project_id;let t=r(),n=new URLSearchParams({"date-from":t.dateFrom,"date-to":t.dateTo,languages:t.languages,sources:t.sources,sourcesID:t.sourcesID,default:$r});fetch(`/api/sentiment-trend/${e}/?`+n).then((e=>e.json())).then((e=>{$r=0;let t={series:[],colors:["#28C76F","#EA5455"],chart:{height:320,type:1===e.length?"scatter":"line",toolbar:{show:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:3},legend:{show:!1},xaxis:{categories:[]},tooltip:{x:{format:"MM/yyyy"}}},n=[],r=[],o=[],i=0,s=0;if(0!==Object.keys(e).length){for(let t of e)i+=t.positivesCount,s+=t.negativesCount,n.push(i),r.push(s),o.push(t.date);t.series.push({name:"Positives",data:n},{name:"Negatives",data:r}),t.xaxis.categories=o,document.getElementById("sentiment-trend-total").innerHTML=i+s,document.getElementById("sentiment-trend-total-positives").innerHTML=i,document.getElementById("sentiment-trend-total-negatives").innerHTML=s,Pr.innerHTML="",Dr=new ApexCharts(Pr,t),Dr.render()}else Pr.innerHTML="";a()}))}(),function(){o(),vr&&vr.destroy(),Lr.innerHTML="Loading...";var e={series:[],colors:[t().neutral],chart:{type:"bar",height:320,events:{dataPointSelection:function(e,t,n){let r=n.w.config.xaxis.categories[n.dataPointIndex],o={};o.sourceID=Mr[r];let a=`/api/new-data/project/${window.project_id}/?format=word-cloud&`+new URLSearchParams({sentiment:encodeURIComponent(o.sentiment),languages:encodeURIComponent(i.languages),sources:i.sources,sourcesID:o.sourceID,"date-from":i.dateFrom,"date-to":i.dateTo});o.csvURL=`/api/new-data/project/${window.project_id}/?format=csv&`+new URLSearchParams({"date-from":i.dateFrom,"date-to":i.dateTo,languages:encodeURIComponent(i.languages),sources:encodeURIComponent(i.sources),sourcesID:o.sourceID,sentiment:o.sentiment}),o.dataURL=`/api/new-data/project/${window.project_id}/?`+new URLSearchParams({"date-from":i.dateFrom,"date-to":i.dateTo,languages:encodeURIComponent(i.languages),sources:encodeURIComponent(i.sources),sourcesID:o.sourceID,sentiment:o.sentiment}),gr(a),document.querySelector("#data-table-modal").style.display="block",d(1,o)}}},plotOptions:{bar:{borderRadius:6,horizontal:!0,barHeight:"24"}},dataLabels:{enabled:!1},xaxis:{categories:[]}};let n=window.project_id,i=r(),s=new URLSearchParams({"date-from":i.dateFrom,"date-to":i.dateTo,languages:i.languages,sourcesID:i.sourcesID});fetch(`/api/volume-by-source/${n}/?`+s).then((e=>e.json())).then((t=>{let n=[],r=[];for(let e of t)n.push(e.sourceCount),r.push(e.sourceName),Mr[e.sourceName]=e.sourceID;e.series.push({data:n}),e.xaxis.categories=r,Lr.innerHTML="",vr=new ApexCharts(Lr,e),vr.render(),a()}))}(),Zr()}function So(){setTimeout(Co,3e3)}function Co(){i()?(_o&&uo(1),xo&&co(1),xo&&_o&&wo(1),Mo()):(fo&&clearTimeout(fo),fo=setTimeout(Co,1e3))}Co(),document.getElementById("date-from").addEventListener("change",(e=>{So()})),document.getElementById("date-to").addEventListener("change",(e=>{So()}));let Ro=document.querySelectorAll("#dropdown-languages .choose input");for(let e of Ro)e.addEventListener("change",(e=>{So()}));let Uo=document.querySelectorAll("#dropdown-sources .choose input");for(let e of Uo)e.addEventListener("change",(e=>{So()}));function ko(){switch(document.querySelectorAll("[data-role='graph-table-container']").forEach((e=>{e.style.display="none"})),document.querySelectorAll(".project-menu ul li a").forEach((e=>{e.className=""})),bo){case"overview-tab":c("overall-sentiment"),c("sentiment-trend"),"true"==document.querySelector("#most-common-chunks-graph").getAttribute("data-show")&&c("most-common-chunks");break;case"aspect-tab":c("aspect-count"),c("aspect-by-sentiment-percentage"),c("aspect-by-sentiment-absolute"),c("aspect-co-occurrence"),c("aspect-topic"),c("aspect-topic-tree-map"),c("emotion-aspect-co-occurrence");break;case"entity-tab":c("entities-table"),xo&&_o&&c("top-entities-per-aspect-table"),c("entity-by-sentiment"),c("classification-by-sentiment");break;case"sources-tab":c("volume-by-source"),c("source-by-sentiment")}!function(e){document.querySelector(`#${e}`).className="active"}(bo)}document.querySelectorAll(".check-all").forEach((e=>{e.addEventListener("click",(e=>{e.target.parentNode.parentNode.querySelectorAll("input").forEach((e=>{e.checked=!0})),So()}))})),document.querySelectorAll(".uncheck-all").forEach((e=>{e.addEventListener("click",(e=>{e.target.parentNode.parentNode.querySelectorAll("input").forEach((e=>{e.checked=!1})),So()}))})),ko(),document.querySelector("#overview-tab").addEventListener("click",(e=>{bo="overview-tab",ko()})),fetch(`/api/aspect-count/${window.project_id}/`).then((e=>e.json())).then((e=>{let t=document.querySelector("#li-aspect-tab");Io--,0==Io&&(Lo.innerHTML=""),0!=e.length?(t.innerHTML='<a style="cursor:pointer;" id="aspect-tab">Aspects</a>',document.querySelector("#aspect-tab").addEventListener("click",(e=>{bo="aspect-tab",ko()}))):(t.style.display="none",_o=!1)})),fetch(`/api/entity-by-sentiment/${window.project_id}/`).then((e=>e.json())).then((e=>{let t=document.querySelector("#li-entity-tab");Io--,0==Io&&(Lo.innerHTML=""),0!=e.length?(t.innerHTML='<a style="cursor:pointer;" id="entity-tab">Entity</a>',document.querySelector("#entity-tab").addEventListener("click",(e=>{bo="entity-tab",ko()})),document.querySelector("#most-common-chunks-graph").setAttribute("data-show","true")):(t.style.display="none",xo=!1)})),document.querySelector("#sources-tab").addEventListener("click",(e=>{bo="sources-tab",ko()})),document.querySelector("#show-word-cloud-modal").addEventListener("click",(e=>{document.querySelector("#word-cloud-modal").style.display="block"})),document.querySelector("#close-word-cloud-modal").addEventListener("click",(e=>{document.querySelector("#word-cloud-modal").style.display="none"}))}()}();