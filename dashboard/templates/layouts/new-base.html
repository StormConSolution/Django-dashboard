<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags --><style>
/* If you like this, be sure to ❤️ it. */
.wrapper {
  height: 100vh;
  /* This part is important for centering the content */
  display: flex;
  align-items: center;
  justify-content: center;
  /* End center */
  background: -webkit-linear-gradient(to right, #834d9b, #d04ed6);
  background: linear-gradient(to right, #834d9b, #d04ed6);
}

.wrapper a {
  display: inline-block;
  text-decoration: none;
  padding: 15px;
  background-color: #fff;
  border-radius: 3px;
  text-transform: uppercase;
  color: #585858;
  font-family: 'Roboto', sans-serif;
}

.modal1 {
  visibility: hidden;
  opacity: 0;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(77, 77, 77, .7);
  transition: all .4s;
}

.modal1:target {
  visibility: visible;
  opacity: 1;
}

.modal__content {
  border-radius: 4px;
  position: relative;
  width: 500px;
  max-width: 90%;
  background: #fff;
  padding: 1em 2em;
}

.modal__close {
  position: absolute;
  top: 10px;
  right: 10px;
  color: #585858;
  text-decoration: none;
}

.modal {
    background-color: rgba(51,51,51,0.8);
}
</style>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    {% block title %}<title>Repustate Insights</title>{% endblock %}

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/static/assets/css/feather.css" />
    <link rel="stylesheet" href="/static/assets/css/bootstrap-datepicker.min.css" />
    <link rel="stylesheet" href="/static/assets/css/tagify.css" />

    <link rel="stylesheet" href="/static/assets/css/style.min.css" />
    <link rel="stylesheet" href="/static/assets/css/apexcharts.css" />

    <script>
        window.Promise ||
            document.write(
                '<script src="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js"><\/script>'
            );
        window.Promise ||
            document.write(
                '<script src="https://cdn.jsdelivr.net/npm/eligrey-classlist-js-polyfill@1.2.20171210/classList.min.js"><\/script>'
            );
        window.Promise ||
            document.write(
                '<script src="https://cdn.jsdelivr.net/npm/findindex_polyfill_mdn"><\/script>'
            );
    </script>

    <script>
        // Replace Math.random() with a pseudo-random number generator to get reproducible results in e2e tests
        // Based on https://gist.github.com/blixt/f17b47c62508be59987b
        var _seed = 42;
        Math.random = function () {
            _seed = (_seed * 16807) % 2147483647;
            return (_seed - 1) / 2147483646;
        };
    </script>

</head>

<body style="position:relative">
    <header>
        <nav class="navbar navbar-expand-lg navbar-main navbar-light ">
            <a class="navbar-brand" href="{% url 'project' %}">
              <img src="/static/assets/images/logo-repustate-dark.svg">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <i class="fe fe-menu"></i>
            </button>
      
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                        <a class="nav-link" href="#" data-toggle="modal" data-target="#createproject"> <i class="fe fe-plus"></i> Create Project</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#" data-toggle="modal" data-target="#uploaddata"> <i class="fe fe-upload"></i> Upload Data</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#" data-toggle="modal" data-target="#exportdata"> <i class="fe fe-download"></i> Export data</a>
          </li>
                <li class="nav-item">
                  <a class="nav-link" href="{% url 'aspects' %}"> <i class="fe fe-hash"></i> Manage Aspect</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="{% url 'sentiment' %}"> <i class="fe fe-crosshair"></i> Manage Sentiment</a>
                </li>
      
      
              </ul>
              <div class="header-right-sidebar d-none d-lg-flex align-items-center ">
                <div class="dropdown avatar-dropdown">
                  <a class="menu-avatar d-flex align-items-center dropdown-toggle" href="#" id="navbarDropdown" role="button"
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img src="/static/assets/images/Avatar.svg" alt="">
                    <span>
                        {{user.username}}
                      <small>Manager</small>
                    </span>
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="https://repustate.com/payment/myaccount/"><i class="fe fe-user"></i> My Account</a>
                    <a class="dropdown-item" href="/logout/"><i class="fe fe-log-out"></i> Logout</a>
                  </div>
                </div>
                <a href="#" id="lightdark">
                  <i class="fe fe-moon"></i>
                  <i class="fe fe-sun"></i>
      
                </a>
              </div>
      
      
            </div>
        </nav>
    </header>
    <div class="sidebar">
        <a href="#" id="sidemenu">
            <i class="fe fe-menu"></i>
        </a>
        <h3>Projects</h3>
        <ul>
            {% for project in projects_data %}
            <li>
                {% if project.name == project_name %}
                    <a href="{% url 'project' project.id %}" class="active"> {{project.name}} </a>
                {% else %}
                    <a href="{% url 'project' project.id %}" > {{project.name}} </a>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </div>
<!-- Upload-data modal start -->
<div
    class="modal fade"
    id="uploaddata"
    tabindex="-1"
    aria-labelledby="uploaddataLabel"
    aria-hidden="true"
>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="uploaddataLabel">Upload Data</h5>
                <button
                    type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close"
                >
                    <i class="fe fe-x-circle"></i>
                </button>
            </div>

            <div class="modal-body">
                <div class="modal-data">
                    <form>
                        <div class="form-group">
                            <label for="selectaspect1" class="form-label"
                                >Select Project</label
                            >
                            <select
                                class="custom-select"
                                id="selectaspect1"
                                aria-placeholder="Choose From Existing Aspects"
                            >
                                <option>Choose From Existing Project</option>
                                <option value="1">Royal Enfiled</option>
                                <option value="2">Rolex</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label"
                                >Upload data or Link spreadsheet</label
                            >
                            <div class="drganddrop mb-2">
                                Drag and drop, or <b>browse</b> your files
                            </div>
                            <small class="form-text extra-text mb-2">
                                OR url link to existing spreadsheet somewhere
                            </small>
                            <input
                                type="text"
                                class="form-control"
                                id="fileurl"
                                placeholder="Enter Spreadsheet URL"
                            />
                        </div>

                        <div class="d-flex flex-wrap align-items-center mt-4">
                            <button type="submit" class="btn btn-primary">
                                Add Data <i class="fe fe-upload"></i>
                            </button>
                            <span class="extra-text ml-auto">
                                Need help? <a href="#">Click here</a>
                            </span>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- upload-data modal End -->

<!-- create-project modal start -->
<div
    class="modal fade"
    id="createproject"
    tabindex="-1"
    aria-labelledby="createprojectLabel"
    aria-hidden="true"
>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createprojectLabel">
                    Create New Project
                </h5>
                <button
                    type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close"
                >
                    <i class="fe fe-x-circle"></i>
                </button>
            </div>

            <div class="modal-body">
                <div class="modal-data">
                    <form method="POST" action="{% url 'project' %}">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="projectname" class="form-label"
                                >Name of new project</label
                            >

                            <input
                                type="text"
                                name="project-name"
                                class="form-control"
                                id="projectname"
                                placeholder="Enter Name"
                            />
                        </div>
                        <div class="form-group">
                            <label for="selectaspect" class="form-label"
                                >Select Aspect</label
                            >
                            <select
                                class="custom-select"
                                id="selectaspect"
                                aria-placeholder="Choose From Existing Aspects"
                                name="aspect-id"
                            >
                                <option value="-1">Choose From Existing Aspects</option>
                                {% for aspect in all_aspects %}
                                    <option value="{{aspect.id}}">{{aspect.label}}</option>
                                {% endfor %}
                            </select>
                            <small
                                id="emailHelp"
                                class="form-text extra-text text-right"
                            >
                                Don't have aspect? <a href="{% url 'aspects' %}">Create Aspect</a>
                            </small>
                        </div>

{% comment %}                         <div class="form-group">
                            <label class="form-label"
                                >Upload data or Link spreadsheet</label
                            >
                            <div class="drganddrop mb-2">
                                Drag and drop, or <b>browse</b> your files
                            </div>
                            <small class="form-text extra-text mb-2">
                                OR url link to existing spreadsheet somewhere
                            </small>
                            <input
                                type="text"
                                class="form-control"
                                id="fileurl"
                                placeholder="Enter Spreadsheet URL"
                            />
                        </div> {% endcomment %}

                        <div class="d-flex flex-wrap align-items-center mt-4">
                            <button type="submit" class="btn btn-primary">
                                Add New Project <i class="fe fe-plus"></i>
                            </button>
                            <span class="extra-text ml-auto">
                                Need help? <a href="#">Click here</a>
                            </span>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade show" id="exportdata" tabindex="-1" aria-labelledby="exportdataLabel" style="display: none; padding-right: 15px;" aria-modal="true" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exportdataLabel">Export Data</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <i class="fe fe-x-circle"></i>
          </button>
        </div>
        <div class="modal-body">
          
          <div class="modal-data">
              <form method="GET" action="/api/export-data/", target="_blank">
                <div class="form-group">
                  <label for="project" class="form-label">Project</label>
                  <select class="custom-select" name="project-id">
                   {% for project in projects_data %}
                        {% if forloop.first %}
                            <option value="{{project.id}}" selected>{{project.name}}</option>
                        {% else %}
                            <option value="{{project.id}}">{{project.name}}</option>
                        {% endif %}
                   {% endfor %}
                  </select>
                </div>
                <div class="form-group">
                  <label for="chosedate" class="form-label">From</label>
                  <div >  
                    <input type="date" class="form-control" name="date-from" placeholder="Choose Date">
                  </div>
                </div>
                <div class="form-group">
                  <label for="chosedate" class="form-label">To</label>
                  <div >  
                    <input type="date" class="form-control" name="date-to" placeholder="Choose Date">
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">Languages</label>
                  <div class="dropdown choose-languages">
                    <button class="btn dropdown-toggle" type="button" id="choose-languages" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Choose Languages
                    </button>
                    <div class="dropdown-menu" aria-labelledby="choose-languages" id="dropdown-languages">
                        <div class="choose-lang">
                          <div class="d-flex checkuncheck">
                          
                            <span class="check-all-without-reload">Select All</span>
                            <span class="uncheck-all-without-reload">Unselect All</span>
                           
                          </div>
                          <div class="choose" style="max-height:30vh;overflow-y:scroll">
                            {% for language in all_languages %}
                                {% ifnotequal language.1 "" %}
                                <div class=" ">
                                    <input type="checkbox" class="" name="languages[]" value="{{language.0}}" checked onclick="return true">
                                    <label class="">{{language.1}}</label>
                                </div>
                                {% endifnotequal %}
                            {% endfor %}
                          </div>
                        </div>
                    </div>

                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">Sources</label>
                  
                  <div class="dropdown choose-sources">
                    <button class="btn dropdown-toggle" type="button" id="choose-sources" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Choose Sources
                    </button>
                    <div class="dropdown-menu" aria-labelledby="choose-languages">
                        <div class="choose-lang">
                          <div class="d-flex checkuncheck">
                            <span>Select All</span>
                            <span>Unselect All</span>
                          </div>
                          <div class="choose" style="max-height:30vh;overflow-y:scroll">
                              {% for source in all_sources %}
                              <div class="">
                                <input type="checkbox" name="sources[]" class="" value="{{source.id}}" checked>
                                <label class="">{{source.label}}</label>
                              </div>
                              {% endfor %}
                          </div>
                        </div>
                      </div>
                  </div>
                </div>
<!--                 <div class="form-group">
                  <label for="email" class="form-label">Email to send results to</label>
                  <input type="email" class="form-control email-icon" id="email" aria-describedby="emailHelp">
                </div> -->
                <button type="submit" class="btn btn-primary">Download Raw Data <!-- <i class="fe fe-send"></i> --> </button>
              </form>
          </div>
        </div>
      </div>
    </div>
  </div>
<!-- create-project modal End -->


    <!-- js -->
    <!--<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>-->
    <script src="/static/assets/js/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="/static/assets/js/bootstrap-datepicker.min.js"></script>
    <script src="/static/assets/js/jQuery.tagify.min.js"></script>

    <script>
        // if IE, add IE tagify's polyfills
        !(function (d) {
            if (!d.currentScript) {
                var s = d.createElement("script");
                s.src = "/static/assets/js/tagify.polyfills.min.js";
                d.head.appendChild(s);
            }
        })(document);
    </script>
    {% block content %}
    {% endblock %}
 
  <script>
    // if IE, add IE tagify's polyfills
    !function( d ) {
        if( !d.currentScript ){
            var s = d.createElement( 'script' );
            s.src = 'js/tagify.polyfills.min.js';
            d.head.appendChild( s );
        }
    }(document)
</script>

    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>
    <script>
        $("sandbox-container input").datepicker({
            todayHighlight: true,
        });
    </script>
    <script>
        $("#lightdark").click(function () {
            $("body").toggleClass("dark-theme");
        });
    </script>
    <script>
        $("#lightdark1").click(function () {
            $("body").toggleClass("dark-theme");
        });
    </script>
    <script>
        $("#sidemenu").click(function () {
            $("body").toggleClass("menu-close");
        });
    </script>
<!--       <script data-name="basic">
        (function () {
            // The DOM element you wish to replace with Tagify
            var input = document.querySelector(".tagify");

            // initialize Tagify on the above input node reference
            new Tagify(input,{
                originalInputValueFormat: valuesArr => valuesArr.map(item => item.value).join(',')
            });
        })();
    </script> -->

    <script>
        document.querySelectorAll(".check-all-without-reload").forEach((element) => {
            element.addEventListener("click", (e)=> {
                
                let parent = e.target.parentNode.parentNode
                
                parent.querySelectorAll("input").forEach((input) => {
                    input.checked = true
                })
            })
        })

        document.querySelectorAll(".uncheck-all-without-reload").forEach((element) => {
            element.addEventListener("click", (e)=> {
                let parent = e.target.parentNode.parentNode
                parent.querySelectorAll("input").forEach((input) => {
                    input.checked = false
                })
            })
        })
    </script>

</body>
</html>
