<div
    class="modal fade"
    id="more-filters-modal"
    tabindex="-1"
    aria-labelledby="createfilterLabel"
    aria-hidden="true"
    aria-modal="true"
    role="dialog"
>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createfilterLabel">
                    Filter Data
                </h5>
                <button
                    type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close"
                >
                    <i class="fe fe-x-circle"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-data">
					<form id="filter-form" method="POST" action="#">
					<div class="form-row">
						<div class="form-group col-6">
						  <label for="chosedate" class="form-label">From</label>
						  <div >  
							<input type="date" class="form-control" id="date-from" value="{{default_date_from}}">
						  </div>
						</div>
						<div class="form-group col-6">
						  <label for="chosedate" class="form-label">To</label>
						  <div >  
							<input type="date" class="form-control" id="date-to" value="{{default_date_to}}">
						  </div>
						</div>
					</div>
				<div class="form-row">
					<div class="form-group col-6">
					  <label class="form-label">Languages</label>
					  <div>
						  <select name="languages[]" id="languages-filter" class="form-control" size="1" multiple="multiple" required>
							{% for language in languages %}
								<option value="{{ language.0 }}">{{ language.1 }}</option>
							{% endfor %}
						  </select>
					  </div>
					</div>
					<div class="form-group col-6">
					  <label class="form-label">Sources</label>
					  <div>
						  <select name="sources[]" id="sources-filter" class="form-control" size="1" multiple="multiple" required>
							{% for source in sources %}
								<option value="{{ source.sourceID }}">{{ source.sourceLabel }}</option>
							{% endfor %}
						  </select>
					  </div>
					</div>
				</div>
                <div class="row">
                    {% for filter in more_filters %}
                        
                    <div class="form-group col-6">
                        <label class="form-label">{{filter.name}}</label>
                        <div>
                            <select name="{{filter.name}}" data-role="metadata-filter" data-target="metadata-filters" class="form-control" size="1" multiple="multiple" required>
                                {% for value in filter.values %}
                                <option value="{{value}}">{{value}}</option>
                                {% endfor %}
                            </select>
                        </div>
                      </div>
                    {% endfor %}
                </div>
                    </form>
                    <div class="d-flex flex-wrap align-items-center mt-4">
                        <button class="btn btn-primary" id="apply-more-filters">
                            Apply Filters
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
	$('#languages-filter').multiselect({
		includeSelectAllOption: true,
		maxHeight:400,
		buttonWidth:'100%',
		buttonText: function(options) {
			if (options.length == 0) {
			  return 'Languages';
			}
			else if (options.length > 6) {
			  return options.length + ' selected';
			}
			else {
			  var selected = '';
			  options.each(function() {
				selected += $(this).text() + ', ';
			  });
			  return selected.substr(0, selected.length -2);
			}
		}
	});
	$('#sources-filter').multiselect({
		includeSelectAllOption: true,
		maxHeight:400,
		buttonWidth:'100%',
		buttonText: function(options) {
			if (options.length == 0) {
			  return 'Sources';
			}
			else if (options.length > 6) {
			  return options.length + ' selected';
			}
			else {
			  var selected = '';
			  options.each(function() {
				selected += $(this).text() + ', ';
			  });
			  return selected.substr(0, selected.length -2);
			}
		}
	});
    $('[data-role="metadata-filter"]').multiselect({
		includeSelectAllOption: true,
		maxHeight:400,
		buttonWidth:'100%',
		buttonText: function(options) {
			if (options.length == 0) {
			  return 'Values';
			}
			else if (options.length > 6) {
			  return options.length + ' selected';
			}
			else {
			  var selected = '';
			  options.each(function() {
				selected += $(this).text() + ', ';
			  });
			  return selected.substr(0, selected.length -2);
			}
		}
	});
</script>
